Search.setIndex({"docnames": ["abstract_uniswap", "index", "installation", "primitive_balancer", "primitive_stableswap", "primitive_uniswapv2", "primitive_uniswapv3", "tutorials/balancer_test", "tutorials/order_book", "tutorials/simple_tree_pt1", "tutorials/stableswap_test", "tutorials/uniswap_simulation", "uniswapv2/index", "uniswapv2/tutorials/indexing_problem", "uniswapv2/tutorials/swap_deposit", "uniswapv2/tutorials/uniswap_simulation", "uniswapv2/tutorials/uniswap_v2", "uniswapv2/tutorials/withdraw_swap", "uniswapv3/index", "uniswapv3/tutorials/uniswap_v3", "usage"], "filenames": ["abstract_uniswap.rst", "index.rst", "installation.rst", "primitive_balancer.rst", "primitive_stableswap.rst", "primitive_uniswapv2.rst", "primitive_uniswapv3.rst", "tutorials/balancer_test.ipynb", "tutorials/order_book.ipynb", "tutorials/simple_tree_pt1.ipynb", "tutorials/stableswap_test.ipynb", "tutorials/uniswap_simulation.ipynb", "uniswapv2/index.rst", "uniswapv2/tutorials/indexing_problem.ipynb", "uniswapv2/tutorials/swap_deposit.ipynb", "uniswapv2/tutorials/uniswap_simulation.ipynb", "uniswapv2/tutorials/uniswap_v2.ipynb", "uniswapv2/tutorials/withdraw_swap.ipynb", "uniswapv3/index.rst", "uniswapv3/tutorials/uniswap_v3.ipynb", "usage.rst"], "titles": ["Uniswap V2/V3", "DeFiPy: DeFi Analytics with Python", "Installation", "Balancer", "StableSwap", "Uniswap V2", "Uniswap V3", "Balancer", "Uniswap V3 Order Book", "Uniswap V2 Simple Tree", "Stableswap", "Basic Uniswap Simulation", "Uniswap V2", "Indexing Problem", "Swap-Deposit", "Basic Uniswap Simulation", "Abstract Interface (V2)", "Withdraw-Swap", "Uniswap V3", "Abstract Interface (V3)", "Usage"], "terms": {"class": [0, 1, 3, 4, 5, 6], "uniswappi": [0, 1, 5, 6, 8, 9, 11, 12, 14, 15, 16, 17], "process": [0, 8], "x": [0, 8, 9, 11, 13, 14, 15, 16, 17, 19, 20], "y": [0, 8, 9, 13, 14, 16, 17, 19, 20], "amount": [0, 1, 3, 4, 5, 6, 11, 14, 15, 16, 19, 20], "pool": [0, 1, 3, 4, 5, 6, 9, 11, 13, 14, 15, 16, 17, 19, 20], "appli": [0, 1, 8, 9, 14, 16, 17, 19], "lp": [0, 1, 3, 4, 5, 6, 8, 9, 10, 13, 14, 16, 17, 19, 20], "user_nm": [0, 1, 5, 8, 9, 13, 14, 16, 17, 19], "amount0": [0, 1, 6], "amount1": [0, 1, 6], "lwr_tick": [0, 1, 8, 19], "none": [0, 1, 4, 5, 6, 7, 10], "upr_tick": [0, 1, 8, 19], "exchang": [0, 1, 3, 4, 5, 6, 7, 8, 9, 13, 14, 16, 17, 19], "str": [0, 3, 4, 5, 6, 10, 14], "account": [0, 6, 8, 13], "name": [0, 3, 4, 5, 6], "float": [0, 3, 4, 5, 6, 7, 10], "token": [0, 1, 9, 12, 13, 14, 16, 19, 20], "int": [0, 4, 5, 6, 8, 9], "lower": [0, 6], "tick": [0, 6, 8], "posit": [0, 6], "which": [0, 1, 6, 14, 20], "add": [0, 3, 4, 5, 6, 16, 19], "upper": [0, 6, 11, 15], "out": [0, 1, 3, 4, 5, 6, 8, 14, 16, 17, 20], "dictionari": [0, 3, 4, 5, 6], "output": [0, 1, 3, 4, 5, 6, 20], "ev": 0, "tdel": 0, "vice": [0, 6, 16, 19, 20], "vers": [0, 6, 16, 19], "eventselectionmodel": [0, 8], "object": [0, 1, 3, 4, 20], "randomli": 0, "gener": 0, "bui": 0, "vs": [0, 9], "sell": [0, 20], "event": [0, 1, 20], "tokendeltamodel": [0, 8, 9], "token_in": [0, 5, 7, 13, 14, 17], "amount_in": [0, 3, 4, 5], "sqrt_price_limit": 0, "erc20": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19], "specifi": [0, 4], "amount_out_expect": [0, 5], "withdrawswap": [0, 12, 18, 20], "from": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19, 20], "oppos": [0, 5, 9, 14, 16, 19], "ad": [0, 7], "specif": [0, 3, 4, 14], "receiv": [0, 3, 4, 5, 6, 14], "singl": [0, 3, 16, 19, 20], "token_out": [0, 7, 17], "amount_out": [0, 5, 16], "withdrawn": [0, 6, 17], "get_trading_token": 0, "get": [0, 3, 4, 5, 6, 13, 14, 16, 17, 19], "trading_token": [0, 17], "swapdeposit": [0, 9, 12, 14, 18, 20], "approx": [0, 14], "half": 0, "proce": 0, "plu": 0, "remain": [0, 14, 16, 19, 20], "other": [0, 3, 4, 5, 20], "approxim": [0, 13, 20], "addliquid": [0, 8, 12, 18, 20], "init_pric": [0, 1], "us": [0, 1, 3, 4, 6, 8, 9, 12, 14, 15, 16, 17, 19, 20], "onli": [0, 1, 6, 13, 16, 19], "removeliquid": [0, 12, 17, 18, 20], "remov": [0, 3, 4, 5, 6, 16, 19], "reserv": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19], "cpt": [0, 5, 6, 13, 17], "indextokenquot": 0, "quote_native_token": 0, "true": [0, 3, 4, 6, 8, 9, 16], "index": [0, 8, 12, 17], "boolean": [0, 3, 4], "base": [0, 3, 4, 5, 7, 15, 16, 19], "otherwis": [0, 20], "base_x_asset": 0, "asset": [0, 1, 3, 4, 5, 7, 13, 14, 16, 19], "pair": [0, 1, 3, 4, 5, 6, 16, 19, 20], "uniswapexchang": [0, 3, 4, 5, 6], "base_y_asset": 0, "get_base_lp": 0, "tkn": [0, 3, 4, 8, 9, 10, 11, 14, 15, 16, 17, 19], "return": [0, 5, 6, 9, 13, 14, 16, 17, 19, 20], "parent": [0, 9], "given": [0, 3, 4, 5, 6, 13, 14, 16, 17, 19], "child": [0, 9], "one": [0, 1, 6, 14, 16, 19, 20], "its": [0, 3, 4, 13], "get_native_x": 0, "tkn_x": 0, "x_amt": 0, "get_native_i": 0, "tkn_y": 0, "y_amt": 0, "get_x": 0, "amt_lp": 0, "an": [0, 1, 3, 4, 5, 6, 7, 8, 14, 20], "hold": [0, 3, 4, 5, 6], "ie": [0, 1, 3, 4, 13, 17], "xy": [0, 13, 17], "k": [0, 8, 9, 10, 11, 15], "get_i": 0, "lpquot": [0, 9, 12, 13, 18, 20], "quote_oppos": [0, 13], "include_fe": [0, 16], "fals": [0, 4, 6, 8, 9, 11, 13, 15, 16, 19], "price": [0, 3, 4, 5, 6, 11, 15, 16, 19, 20], "default": [0, 20], "get_amount": [0, 5, 16, 19], "input": [0, 3, 4, 5, 6], "amt_out": [0, 3, 17], "get_amount_from_lp": [0, 13, 16, 19], "amount_lp_in": 0, "get_liquid": [0, 5, 6], "get_lp_from_amount": [0, 4, 13, 16, 19], "get_opposing_token": 0, "get_pric": [0, 3, 4, 5, 6, 7, 8, 9, 10, 16, 19], "respect": 0, "get_reserv": [0, 3, 4, 5, 6, 10, 13], "rebaseindextoken": [0, 9], "determin": [0, 6, 14, 16, 17, 19], "rebas": [0, 16, 19], "certain": [0, 14], "invers": 0, "settlementlptoken": [0, 9], "liq_amt": 0, "calcul": [0, 6, 7, 14, 17, 20], "settlement": [0, 16, 17, 19], "what": [0, 1], "term": 0, "rebase_amount": 0, "itkn_amt": [0, 13, 17], "lp_amount": 0, "world": 1, "first": [1, 2, 14], "packag": [1, 2], "all": [1, 3, 4, 6, 7, 13, 14, 20], "major": 1, "protocol": [1, 2, 6, 20], "integr": [1, 14, 17, 20], "sinc": 1, "built": 1, "modular": 1, "design": 1, "mind": 1, "you": [1, 20], "can": [1, 6, 13, 14, 17, 20], "silo": 1, "your": [1, 2], "balancerpi": [1, 3], "stableswappi": [1, 4], "For": [1, 14], "surveil": 1, "checkout": 1, "To": [1, 2, 6, 14, 20], "setup": [1, 2, 20], "liquid": [1, 3, 4, 5, 6, 9, 11, 13, 14, 15, 16, 17, 19, 20], "must": [1, 2, 6, 14], "creat": [1, 3, 4, 5, 6], "next": [1, 6], "factori": [1, 3, 4, 5, 6, 7, 8, 9, 10, 13, 14, 16, 17, 19], "uniswapexchangedata": [1, 5, 6, 8, 9, 13, 14, 16, 17, 19], "data": [1, 3, 4, 5, 6, 8], "avail": [1, 20], "via": [1, 3, 6, 13, 16, 17, 19, 20], "primit": 1, "api": [1, 9, 15, 20], "also": [1, 2, 3, 4, 5, 6], "abstract": [1, 12, 18], "tool": 1, "see": [1, 2, 13, 14], "interfac": [1, 12, 18], "tutori": [1, 20], "basic": 1, "follow": [1, 7, 13, 14, 17, 20], "import": [1, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19], "user_intro": 1, "eth_amount": [1, 8, 13, 14, 16, 17, 19], "3162": 1, "277660168379": 1, "dai_amount": [1, 13], "316227": 1, "7660168379": 1, "dai": [1, 7, 11, 13, 15], "0x111": [1, 7, 8, 9, 11, 13, 14, 15, 16, 17, 19], "eth": [1, 8, 13, 14, 16, 17, 19], "0x09": [1, 7, 8, 9, 11, 13, 14, 15, 16, 17, 19], "exchg_data": [1, 3, 4, 5, 6, 7, 8, 9, 10, 13, 14, 16, 17, 19], "tkn0": [1, 8, 9, 13, 14, 16, 17, 19], "tkn1": [1, 8, 9, 13, 14, 16, 17, 19], "symbol": [1, 3, 4, 7, 8, 9, 10, 13, 14, 16, 17, 19], "address": [1, 3, 4, 5, 6, 7, 8, 9, 10, 13, 14, 16, 17, 19], "0x011": [1, 7, 8, 9, 10, 13, 14, 16, 17, 19], "uniswapfactori": [1, 5, 6, 8, 9, 13, 14, 16, 17, 19], "0x2": [1, 7, 8, 9, 10, 13, 14, 16, 17, 19], "deploi": [1, 3, 4, 5, 6, 7, 8, 9, 10, 13, 14, 16, 17, 19], "add_liquid": [1, 4, 5, 10, 13, 14, 17], "user0": [1, 9, 14, 17, 19], "summari": [1, 3, 4, 5, 6, 7, 8, 9, 10, 13, 14, 16, 17, 19], "31622": [1, 13, 14, 16], "776601683792": [1, 13, 14, 16], "simular": 1, "abov": [1, 2, 13, 14, 17, 20], "onc": [1, 2], "thi": [1, 6, 13, 14, 20], "unlimit": 1, "user": [1, 3, 4, 5, 6, 7, 10, 16], "fee": [1, 4, 6, 8, 9, 13, 16, 17, 19], "univ3util": [1, 8, 19], "feeamount": [1, 8, 19], "medium": [1, 8, 9, 11, 15, 19], "tick_spac": [1, 8, 19], "getmintick": [1, 19], "getmaxtick": [1, 19], "encodepricesqrt": 1, "100": [1, 7, 8, 9, 13, 14, 16, 17, 19], "1": [1, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19], "version": [1, 8, 19, 20], "initi": [1, 3, 4, 5, 6, 7, 14, 17], "mint": [1, 3, 4, 5, 6], "left": [1, 6, 11, 13, 14, 15, 17, 20], "side": [1, 8, 16, 19, 20], "menu": [1, 20], "serv": 1, "extens": 1, "constant": [1, 4, 13, 17], "product": [1, 4, 13, 17], "trade": [1, 13, 16, 17, 19, 20], "handl": [1, 2], "more": [1, 2, 20], "than": [1, 6], "two": [1, 7, 14, 20], "ar": [1, 6, 7, 13, 14, 20], "known": 1, "weight": [1, 4, 7, 8], "As": [1, 13, 20], "both": [1, 5, 13, 14], "muilt": 1, "thei": 1, "have": [1, 2, 6, 13, 14], "call": [1, 3, 4, 6], "vault": [1, 7, 10], "tout": 1, "being": 1, "defin": [1, 12], "featur": 1, "henc": [1, 13, 17], "we": [1, 6, 8, 13, 14, 17, 20], "includ": [1, 9, 14, 20], "balancervault": [1, 3, 7], "stableswapvault": [1, 4, 10], "shown": 1, "user_test": [1, 7, 10, 13], "amt_dai": [1, 7, 10], "10000000": [1, 7], "denorm_wt_dai": [1, 7], "10": [1, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19, 20], "amt_eth": [1, 7, 16, 19], "67738": [1, 7], "6361731024": [1, 7], "denorm_wt_eth": [1, 7], "40": [1, 7], "init_pool_shar": [1, 7], "0x01": 1, "deposit": [1, 3, 4, 5, 6, 7, 8, 10, 12, 13, 16, 17, 19, 20], "weth": [1, 7], "0x02": 1, "bgrp": [1, 7], "add_token": [1, 3, 4, 7, 10], "bfactori": [1, 7], "balancerfactori": [1, 3, 7], "0x": 1, "balancerexchangedata": [1, 3, 7], "0x1": 1, "join_pool": [1, 3, 4, 7, 10], "0": [1, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19], "2": [1, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19, 20], "8": [1, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19], "share": [1, 3, 4, 6], "lesser": 1, "implement": [1, 4, 7, 15, 20], "compos": 1, "stabl": 1, "ideal": 1, "set": [1, 3, 4, 6, 13, 20], "up": [1, 13], "coin": [1, 5], "ampl_coeff": [1, 4, 10], "2000": [1, 8, 9, 10, 13], "79566307": [1, 10], "559825807715868071": [1, 10], "decimal_dai": [1, 10], "18": [1, 7, 8, 9, 10, 11, 15, 16, 19, 20], "amt_usdc": [1, 10], "81345068": [1, 10], "187939": [1, 10], "decimal_usdc": [1, 10], "6": [1, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19], "amt_usdt": [1, 10], "55663250": [1, 10], "772939": [1, 10], "decimal_usdt": [1, 10], "usdc": [1, 9, 14], "usdt": [1, 9], "0x03": 1, "sgrp": [1, 10], "sfactori": [1, 10], "stableswapfactori": [1, 4, 10], "stableswapexchangedata": [1, 4, 10], "0x11": 1, "55982581": [1, 10], "216573027": [1, 10], "91811988": [1, 10], "pull": [1, 9], "chain": 1, "util": [1, 8, 11, 15], "our": [1, 13, 14, 17, 20], "new": [1, 3, 4, 5, 6], "abi": 1, "ll": 1, "fork": 1, "yourself": 1, "howev": [1, 6, 13, 14], "make": [1, 16, 19, 20], "customiz": 1, "so": [1, 13, 20], "monitor": 1, "favorit": 1, "abiload": 1, "platform": 1, "univ3": 1, "jsoncontract": 1, "uniswapv3pool": 1, "connect": [1, 20], "connectw3": 1, "net": [1, 8], "polygon": 1, "revent": 1, "retrieveev": 1, "last_block": 1, "latest_block": 1, "start_block": 1, "15": [1, 7, 8, 9, 10, 11, 13, 15, 16, 19], "dict_ev": 1, "eventtyp": 1, "end_block": 1, "contract": [1, 7, 20], "type": [1, 5, 6], "uniswap_v3": 1, "pool_address": 1, "0xb6e57ed85c4c9dbfef2a68711e9d6f36c56e0fcb": 1, "tx_hash": 1, "0xe499971b5410e766d00bf4467c6b333cda04577f1068bb676debe72331254365": 1, "blk_num": 1, "61391083": 1, "timestamp": 1, "1725401207": 1, "detail": 1, "web3_typ": 1, "web3": 1, "_util": 1, "datatyp": 1, "owner": [1, 6], "0xc36442b4a4522e871399cd717abdd847ab11fe88": 1, "tick_low": 1, "286090": 1, "tick_upp": 1, "284860": 1, "liquidity_amount": 1, "884887839988325": 1, "39958320744269616249": 1, "17912626": 1, "0x960fdfe0de1079459493a7e3aa857f8ce0b34016": 1, "0x29d53602b1bbd67734c2e3deba8ad0a55aa84204a6244e720f24ee5160505213": 1, "61391092": 1, "1725401227": 1, "22600": 1, "40000": 1, "7675592444129481120": 1, "64052149877205455": 1, "29656680135133456015": 1, "These": [1, 14], "doc": [1, 2], "intend": 1, "anyon": 1, "who": [1, 20], "build": 1, "whether": [1, 3, 4, 6, 20], "re": [1, 7, 9, 10, 17], "aggreg": 1, "yield": 1, "trader": 1, "provid": [1, 20], "founder": 1, "web": 1, "dev": [1, 2, 7], "arbitrageur": 1, "amm": 1, "mathematician": 1, "curiou": 1, "individu": 1, "place": 1, "check": [1, 3, 4, 6, 12, 17], "usag": 1, "section": 1, "further": 1, "inform": 1, "how": [1, 3, 4, 6, 8, 11, 13, 14, 15], "instal": 1, "project": 1, "under": [1, 14], "activ": 1, "develop": [1, 20], "gmpy2": 2, "python": [2, 7, 8, 20], "precis": 2, "within": [2, 3, 4, 6], "stableswap": 2, "requir": [2, 17], "cpython": 2, "3": [2, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19], "7": [2, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19], "latest": 2, "releas": 2, "pip": 2, "mani": [2, 14], "case": [2, 6], "need": [2, 6, 14], "librari": 2, "gmp": 2, "mpfr": 2, "mpc": 2, "alreadi": 2, "system": [2, 13, 14, 17], "info": 2, "defipi": [2, 7, 8, 10, 19, 20], "git": 2, "clone": 2, "http": 2, "github": [2, 4], "com": 2, "cd": 2, "path": 2, "directori": 2, "manual_balanc": 3, "balancerexchang": [3, 7], "factory_struct": [3, 4, 5, 6], "factorydata": [3, 4, 5, 6], "exchg_struct": [3, 4, 5, 6], "autom": [3, 4], "market": [3, 4, 8, 9], "maker": [3, 4], "self": [3, 4], "burn": [3, 4, 5, 6], "amt_tkn_out": [3, 4, 7], "tkn_out": [3, 4, 7, 10], "_from": [3, 4, 5, 6], "number": 3, "request": [3, 4, 17], "exit_pool": 3, "amt_shares_out": [3, 7], "withdraw": [3, 6, 12, 16, 19, 20], "exit": 3, "exit_swap_extern_amount_out": [3, 7], "exit_swap_pool_amount_in": [3, 7], "get_amount_in": [3, 7], "tkn_in": [3, 4, 7, 10], "some": [3, 4, 13], "equival": [3, 4, 5], "get_amount_out": [3, 4, 5, 7], "amt_tkn_in": [3, 4, 7, 10], "base_tkn": [3, 4], "opp_tkn": [3, 4], "select": [3, 4, 5, 6, 7], "denomin": [3, 4, 6], "amt_shares_in": [3, 4, 7], "tkn_grvaultoup": 3, "balancererc20group": 3, "group": [3, 4, 10], "join_swap_extern_amount_in": [3, 7], "come": [3, 4, 16, 19, 20], "join_swap_pool_amount_out": [3, 7], "new_shar": [3, 4], "updat": [3, 4, 5], "summar": 3, "current": [3, 4, 6, 8, 20], "state": [3, 4], "swap": [3, 4, 5, 6, 8, 9, 12, 13, 18, 20], "amt_swap": 3, "amt_fe": 3, "swape": [3, 4], "swap_exact_amount_in": [3, 7], "swap_exact_amount_out": [3, 7], "newli": [3, 4, 5, 6], "get_exchang": [3, 4, 5, 6], "map": [3, 4, 5, 6, 7], "get_token": [3, 4, 5, 6, 10], "manag": [3, 4], "list": [3, 4], "tkn_dic": [3, 4], "referenc": [3, 4], "tkn_denorm_wt": 3, "denorm": [3, 7], "tkn_bound": 3, "indic": [3, 4, 6], "bound": 3, "bool": [3, 6], "check_tkn": [3, 4], "contain": [3, 4], "get_bal": [3, 4], "referen": [3, 4], "tkn_balanc": [3, 4, 10], "dict": [3, 4], "get_bound": 3, "norm_wts_dict": [3, 4], "get_denorm_weight": 3, "get_norm_weight": 3, "get_dict": [3, 4], "tkn_dict": [3, 4], "get_nam": [3, 4], "tkn_nm": [3, 4, 9, 10], "delimit": [3, 4], "hyphen": [3, 4], "string": [3, 4], "normal": [3, 7], "tkn_name": [3, 4], "retriev": [3, 4, 16, 19], "cwpquot": 3, "get_amount_from_shar": 3, "amount_shares_in": 3, "uniswap": [3, 4], "cwpt": [3, 4, 7], "get_shares_from_amount": 3, "lp_amt": [3, 4], "erc": [3, 4, 5, 6], "addr": [3, 4, 5, 6], "token_nam": [3, 4, 5, 6, 7, 10, 13, 14, 16, 17, 19], "token_addr": [3, 4, 5, 6], "token_tot": [3, 4, 5, 6, 10], "valu": [3, 4, 5, 6, 8, 10, 13], "delta": [3, 4, 5, 6, 8, 9, 13, 14, 17], "total": [3, 4, 5, 6, 13, 14, 17], "transfer": [3, 4, 5, 6], "_to": [3, 4, 5, 6], "manual_stableswap": 4, "stableswapexchang": 4, "tkn_amt_in": 4, "liquidity_out": 4, "tkn_out_amt": [4, 7, 10], "get_math_pool": [4, 10], "underli": 4, "stableswappoolmath": 4, "math_pool": [4, 10], "math": [4, 7, 13, 14, 17], "curveresearch": 4, "repo": [4, 7], "stableswaperc20group": 4, "new_liquid": 4, "remove_liquid": [4, 5, 10], "liquidity_amt_out": 4, "use_fe": 4, "print": [4, 5, 6, 7, 9, 10, 11, 13, 14, 15, 16, 17, 19], "amt2dec": 4, "tkn_amt": [4, 9], "decim": [4, 5, 6, 10], "convert": 4, "balanc": [4, 6, 9], "get_decimal_amt": [4, 10], "format": [4, 14, 17, 20], "decimal_amt": 4, "get_decim": 4, "get_rat": 4, "rate": [4, 17], "tkn_rate": 4, "csquot": 4, "option": [4, 5, 6, 20], "reset": [4, 5, 6], "exchange_from_token": [5, 6], "tokens_from_exchang": [5, 6], "exchg": [5, 6], "factoryinit": [5, 6], "uniswapexchangeinit": [5, 6], "_from_addr": 5, "amountadesir": 5, "amountbdesir": 5, "amountamin": 5, "amountbmin": 5, "desir": [5, 16, 19, 20], "A": [5, 14, 17, 20], "b": [5, 8, 9, 11, 13, 14, 15, 16, 17, 19, 20], "minimum": [5, 6], "to_addr": 5, "amounta": 5, "amountb": 5, "est": 5, "reserve0": [5, 9, 13, 14, 17], "reserve1": [5, 9, 13, 14, 17], "maximum": 5, "get_amount_out0": 5, "get_amount_out1": 5, "portion": [5, 14, 17, 20], "_amounta": 5, "_amountb": 5, "each": 5, "quot": [5, 13, 14, 16, 19, 20], "reservea": 5, "reserveb": 5, "amounta_out": 5, "amountb_out": 5, "swap_exact_tokens_for_token": 5, "amountin": 5, "amountoutmin": 5, "amt": [5, 10, 14, 17], "min": 5, "expect": [5, 9, 14, 16, 19], "update_reserv": 5, "amounta_upd": 5, "amountb_upd": 5, "either": [5, 6, 16, 19, 20], "acccount": 5, "holder": [5, 20], "lperc20": [5, 6], "daosi": [5, 6], "add_token_lp": [5, 6], "remove_token_lp": [5, 6], "set_token_lp": [5, 6], "uniswapv3exchang": 6, "recipi": 6, "ticklow": 6, "tickupp": 6, "sender": 6, "ow": 6, "trigger": 6, "recalcul": 6, "collect": [6, 9], "separ": 6, "much": [6, 13], "token0": [6, 14], "exact": [6, 16, 19, 20], "when": [6, 14, 17], "neg": 6, "token1": [6, 13, 17], "checktick": 6, "common": 6, "valid": [6, 13], "amount0request": 6, "amount1request": 6, "doe": [6, 10], "recomput": 6, "earn": 6, "done": [6, 20], "ani": [6, 20], "mai": 6, "zero": [6, 11, 15], "caller": 6, "pass": [6, 10], "greater": 6, "actual": 6, "e": 6, "g": [6, 9], "uint128": 6, "max": 6, "accumul": 6, "should": [6, 14], "wa": [6, 7, 10], "paid": 6, "get_virtual_reserv": 6, "virtual": 6, "sqrtpricex96": 6, "sqrt": [6, 13, 14, 17, 20], "q64": [6, 20], "96": [6, 8, 20], "The": [6, 7, 13, 14, 16, 17, 19, 20], "final": [6, 12], "automat": 6, "swapper": 6, "due": 6, "depend": 6, "nexttick": 6, "lte": 6, "It": 6, "assum": [6, 9, 13], "kei": 6, "min_tick": 6, "max_tick": 6, "alwai": 6, "don": 6, "t": [6, 9], "run": [6, 11, 14, 15, 17], "risk": 6, "overshoot": 6, "ticknext": 6, "boundari": 6, "long": 6, "been": [6, 17], "right": [6, 13, 14, 17, 20], "Then": 6, "init": 6, "start": [6, 11, 13, 15], "search": 6, "less": 6, "equal": [6, 14], "function": [6, 15], "setfeeprotocol": 6, "feeprotocol0": 6, "feeprotocol1": 6, "s": [6, 13, 14, 17], "zeroforon": 6, "amountspecifi": 6, "sqrtpricelimitx96": 6, "end": [6, 14, 17], "direct": [6, 9], "implicitli": 6, "configur": 6, "limit": [6, 20], "If": 6, "cannot": 6, "after": [6, 9, 14, 16, 19], "swap0forexact1": 6, "sqrtpricelimit": 6, "swapexact0for1": 6, "highest": 6, "directli": 6, "swap1forexact0": 6, "swapexact1for0": 6, "broadli": 7, "consist": [7, 20], "main": [7, 20], "compon": 7, "balancermath": 7, "py": 7, "refactor": [7, 20], "v1": 7, "solid": [7, 20], "code": 7, "copi": [7, 20], "balancerpools_model": 7, "gh": 7, "bmath": 7, "calcspotpric": 7, "calc_spot_pric": 7, "calcoutgivenin": 7, "calc_out_given_in": 7, "calcingivenout": 7, "calc_in_given_out": 7, "calcpooloutgivensinglein": 7, "calc_pool_out_given_single_in": 7, "calcsingleingivenpoolout": 7, "calc_single_in_given_pool_out": 7, "calcpoolingivensingleout": 7, "calc_pool_in_given_single_out": 7, "calcsingleoutgivenpoolin": 7, "calc_single_out_given_pool_in": 7, "os": [7, 9, 14, 15, 17], "json": [7, 10], "numpi": [7, 9, 10, 11, 14, 15, 17], "np": [7, 8, 9, 10, 11, 14, 15, 17], "test": 7, "extract": 7, "cwd": 7, "getcwd": 7, "replac": 7, "notebook": 7, "chdir": 7, "actions_json": 7, "resourc": [7, 20], "0x8b6e6e7b5b3801fed2cafd4b22b8a16c2f2db21a": 7, "action": [7, 20], "open": 7, "r": [7, 8, 9], "f": [7, 8, 9, 10, 11, 13, 15, 16, 19], "pool_act": 7, "load": 7, "loos": 7, "target": 7, "percentag": 7, "deploy": 7, "sum": 7, "typic": 7, "4": [7, 8, 10, 11, 13, 14, 15, 16, 17, 19], "5": [7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19], "p": [7, 8], "591": 7, "984912776992": 7, "11861": 7, "328308361": 7, "20": [7, 9, 10, 11, 13, 15, 16], "021734704865246": 7, "10011861": 7, "32830836": 7, "67718": 7, "61443839753": 7, "9": [7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 19], "tkn_in_amt": 7, "11878": 7, "911104285744": 7, "9999982": 7, "417204075": 7, "11": [7, 9, 10, 11, 13, 14, 15, 16, 17, 19], "336": 7, "result": 7, "anaddit": 7, "shares_in_amt": 7, "26": [7, 10], "741601415598677": 7, "03156505964916199": 7, "12": [7, 8, 9, 10, 11, 13, 14, 15, 16, 19], "67765": 7, "377774518": 7, "03156505964917": 7, "13": [7, 8, 10, 11, 13, 15, 16, 19], "were": 7, "addit": [7, 20], "8575": 7, "568763821291": 7, "14": [7, 8, 9, 10, 11, 13, 14, 15, 16, 19], "76340": 7, "94653833928": 7, "110": 7, "664": 7, "shares_out_amt": 7, "27": [7, 16], "036668416618735": 7, "031191445644352424": 7, "16": [7, 10, 11, 15, 16, 19], "76313": 7, "90986992266": 7, "00037361400481": 7, "17": [7, 10, 11, 15, 16, 19], "8566": 7, "8415530723": 7, "67747": 7, "06831685036": 7, "here": 8, "articl": [8, 9, 11, 15], "panda": [8, 9, 11, 15], "pd": [8, 9, 11, 15], "seaborn": [8, 9], "sn": [8, 9], "matplotlib": [8, 9, 11, 15], "pyplot": [8, 9, 11, 15], "plt": [8, 9, 11, 15], "mockaddress": 8, "tkn_amount": [8, 9, 16, 17, 19], "1000": [8, 9, 13, 14, 16, 17, 19], "geometr": 8, "brownian": 8, "motion": 8, "n_step": [8, 11, 15], "start_pric": [8, 11, 15], "mu": [8, 11, 15], "sigma": [8, 11, 15], "n_path": [8, 11, 15], "brownianmodel": [8, 11, 15], "p_arr": [8, 9, 11, 15], "gen_gbm": [8, 11, 15], "exp_p_arr": [8, 11, 15], "median": [8, 11, 15], "axi": [8, 11, 15], "50": [8, 14, 16, 17, 19, 20], "univ3help": 8, "get_price_tick": 8, "join": [8, 9, 12, 18, 20], "real": [8, 19], "70469739529014": 8, "gross": [8, 19], "6440": 8, "3320664241655": 8, "arb": [8, 9], "correctreserv": [8, 9], "x0": [8, 9], "p_interv": 8, "500": 8, "800": 8, "1200": 8, "1500": 8, "1700": 8, "lp_price": 8, "lp_liquid": 8, "total_suppli": [8, 10, 13, 16, 17], "lp_swap": 8, "lp_net_deposit": 8, "rang": [8, 9, 11, 15], "select_tkn": 8, "bi_select": 8, "rnd_add_amt": 8, "25": [8, 10, 11, 15, 16], "rnd_swap_amt": 8, "user_add": 8, "random": [8, 9], "choic": 8, "user_swap": 8, "els": [8, 10, 13, 14, 17], "append": [8, 9], "614127": 8, "7691542099": 8, "17821512": 8, "609132715": 8, "35165267": 8, "83386152": 8, "df_liq": 8, "datafram": 8, "column": 8, "po": 8, "enumer": [8, 10], "tick_to_pric": 8, "liq": 8, "liquiditygross": 8, "loc": [8, 11, 15], "center_po": 8, "price_to_tick": 8, "sort_valu": 8, "inplac": 8, "reset_index": 8, "drop": 8, "side_arr": 8, "ask": 8, "elif": 8, "bid": 8, "center": 8, "idx": 8, "17940": 8, "012919": 8, "50341": 8, "631295": 8, "18120": 8, "122126": 8, "22053": 8, "081205": 8, "18180": 8, "158967": 8, "16493": 8, "867865": 8, "18300": 8, "233316": 8, "154124": 8, "547473": 8, "18420": 8, "308563": 8, "1242": 8, "862215": 8, "192": 8, "29640": 8, "19": [8, 10, 11, 13, 15, 16, 19], "372447": 8, "1834": 8, "850559": 8, "193": 8, "29700": 8, "489025": 8, "454": 8, "070649": 8, "194": 8, "29820": 8, "724291": 8, "106": 8, "278197": 8, "195": 8, "29940": 8, "962396": 8, "205": 8, "903139": 8, "196": 8, "30480": 8, "21": [8, 10, 11, 15, 16], "069945": 8, "774698": 8, "row": 8, "fig": [8, 9, 11, 15], "figur": [8, 9, 11, 15], "figsiz": [8, 9, 11, 15], "current_pric": 8, "book_ax": 8, "price_ax": 8, "liq_ax": 8, "subplot": [8, 9, 11, 15], "nrow": [8, 9, 11, 15], "sharex": [8, 9, 11, 15], "sharei": [8, 9, 11, 15], "bar": 8, "color": [8, 9, 11, 14, 15, 17], "steelblu": 8, "width": [8, 13], "0005": [8, 9], "label": [8, 9, 11, 15], "alpha": [8, 9, 14, 17], "axvlin": 8, "mediumvioletr": 8, "linewidth": [8, 9, 11, 15], "linestyl": [8, 9, 11, 15], "dashdot": [8, 9], "set_xlabel": [8, 9], "usd": [8, 9, 11, 15], "size": [8, 9, 13], "set_ylabel": [8, 9, 11, 15], "set_titl": [8, 9, 11, 15], "distribut": [8, 9, 12, 14, 20], "legend": [8, 9, 11, 15], "x_val": [8, 9], "arang": [8, 9], "len": [8, 9], "dash": [8, 9, 11, 15], "time": 8, "sampl": [8, 11, 15], "tight_layout": 8, "lt": [8, 9, 11, 15], "1000x500": 8, "ax": [8, 9, 11, 15], "gt": [8, 9, 11, 15], "distplot": [8, 9], "hist": [8, 9], "kde": [8, 9], "bin": [8, 9], "30": [8, 9], "darkblu": [8, 9], "hist_kw": [8, 9], "edgecolor": [8, 9], "black": [8, 9], "kde_kw": [8, 9], "histogram": 8, "volum": [8, 9], "frequenc": [8, 9], "text": [8, 9, 11, 15], "39": [8, 9, 11, 15], "scatterplot": 8, "hue": 8, "palett": [8, 11, 15], "green": 8, "red": [8, 14], "fontsiz": [8, 9, 11, 15], "depth": 8, "chart": [8, 9], "ecdfplot": 8, "stat": [8, 9], "count": 8, "complementari": 8, "queri": 8, "iusdc": 9, "stablecoin": 9, "part": 9, "datetim": [9, 11, 15], "scipi": 9, "statsmodel": 9, "sm": 9, "init_tkn_lp": 9, "100000": [9, 16, 17, 19], "tkn_delta_param": 9, "tkn_invest_amt": 9, "itkn_nm": 9, "usdt_nm": 9, "iusdt_nm": 9, "iusdt": 9, "n_sim_run": 9, "seconds_year": 9, "31536000": 9, "shape": 9, "scale": 9, "gamma": [9, 13, 17], "n_run": 9, "dt": 9, "timedelta": [9, 11, 15], "second": 9, "date": 9, "strptime": 9, "2024": 9, "09": [9, 17], "01": [9, 13, 16, 19], "m": 9, "d": 9, "usd_ax": [9, 11, 15], "plot": [9, 11, 15], "usdt_amount": 9, "usdt1": 9, "ivault1": 9, "indexvault": 9, "0x7": 9, "tkn2": [9, 16], "itkn1": 9, "indexerc20": 9, "exchg_data1": 9, "lp1": 9, "0x012": [9, 16], "jointre": 9, "10000": [9, 10, 11, 15, 16, 19], "109999": 9, "99999999997": 9, "99999999996": 9, "109985": 9, "44629289121": 9, "9972": 9, "071706380626": 9, "4899": 9, "094641375661": 9, "6989": 9, "572451884534": 9, "tkn_invest": 9, "invested_user_nm": 9, "invested_us": 9, "swapindexmint": 9, "mint_itkn1_deposit": 9, "index_token": 9, "last_lp_deposit": 9, "lp_invest_track": 9, "liquidity_provid": 9, "lp1_invest_track": 9, "redeem": 9, "tkn_redeem_par": 9, "itkn_redeem_child": 9, "tkn_redeem_tre": 9, "3f": 9, "1f": 9, "immedi": 9, "110099": 9, "110035": 9, "3532349541": 9, "4949": 9, "00158343855": 9, "7025": 9, "030187940207": 9, "99": [9, 16, 19], "700": 9, "49": 9, "907": 9, "403": 9, "35": 9, "458": 9, "arb1": 9, "lp_direct_invest_arr": 9, "lp1_direct_invest_arr": 9, "lp1_tree_invest_arr": 9, "ptkn_usdt_arr": 9, "ptkn_itkn_arr": 9, "fee_lp_arr": 9, "fee_lp1_arr": 9, "arbitrag": 9, "p_lp1": 9, "conserv": 9, "captur": 9, "treeamountquot": 9, "get_tot_i": 9, "collected_fee0": 9, "collected_fee1": 9, "149426": 9, "80534721568": 9, "149635": 9, "27229653625": 9, "140899": 9, "70187969503": 9, "12835": 9, "149094885222": 9, "6213": 9, "8308577411735": 9, "8131": 9, "113362097906": 9, "105": 9, "677": 9, "114": 9, "332": 9, "tkn_ax": 9, "usdt_ax": 9, "strt_pt": 9, "comparison": 9, "grid": 9, "lowess": 9, "nonparametr": 9, "frac": [9, 13, 14, 17], "sm_lp_direct": 9, "sm_lp1_direct": 9, "sm_lp1_tree": 9, "strt_ind": 9, "p_ax": [9, 11, 15], "suptitl": 9, "set_ylim": 9, "80": 9, "140": 9, "befor": 9, "worth": [9, 13, 16, 19], "000": 9, "846": 9, "111": 9, "902": 9, "182": 9, "fee_lpb": 9, "arrai": [9, 11, 15], "fee_lpa": 9, "fill_between": 9, "repeat": 9, "titl": 9, "cumul": 9, "uni": 9, "ylabel": 9, "0x15faf1810": 9, "0xa0b": 10, "0xf93": 10, "0xd7c": 10, "p_usdc_dai": 10, "p_dai_usdc": 10, "9999896456022903": 10, "0000103545049244": 10, "usdc_befor": 10, "usdt_befor": 10, "9996": 10, "862748": 10, "leak": 10, "usdc_check": 10, "usdt_check": 10, "usdc_test": 10, "fail": 10, "usdt_test": 10, "81355068": 10, "55653253": 10, "910191": 10, "dai_befor": 10, "9998": 10, "895308918858": 10, "dai_check": 10, "dai_test": 10, "79556308": 10, "6645169": 10, "81365068": 10, "liquidity_amt_in": 10, "919116999057": 10, "55663253": 10, "216583028": 10, "83723688": 10, "968444705135": 10, "79566308": 10, "216593027": 10, "8056816": 10, "amt_lp_out": 10, "250000": 10, "lp_amt_befor": 10, "250001": 10, "94300082736": 10, "lp_amt_check": 10, "lp_amt_test": 10, "79316306": 10, "72151607": 10, "216343027": 10, "500000": 10, "500009": 10, "469211": 10, "80865058": 10, "718728": 10, "215843027": 10, "499898": 10, "496234": 10, "55163355": 10, "413957": 10, "215343027": 10, "22": [10, 11, 15, 16], "tkn_decimal_amt": 10, "23": [10, 11, 13, 15, 16], "lp_test": 10, "round": 10, "24": [10, 11, 15, 16], "tkn_reserv": 10, "tkn_math_pool_bal": 10, "token_decim": 10, "assert": 10, "error": 10, "NOT": [10, 20], "match": 10, "WITH": [10, 20], "decentr": [11, 15], "financ": [11, 15], "pymc": [11, 15], "5000": [11, 15], "t_delta": [11, 15], "linspac": [11, 15], "365": [11, 15], "num": [11, 15], "2023": [11, 15], "date_tim": [11, 15], "gca": [11, 15], "gp": [11, 15], "plot_gp_dist": [11, 15], "transpos": [11, 15], "cool": [11, 15], "plot_sampl": [11, 15], "white": [11, 15], "sysusd": [11, 15], "gbm": [11, 15], "sy": [11, 15], "facecolor": [11, 15], "lightgrai": [11, 15], "0x280a50790": 11, "sys_arr": [11, 15], "float64": [11, 15], "x_amt_arr": [11, 15], "y_amt_arr": [11, 15], "trial": [11, 15], "p_trial_arr": [11, 15], "lp_sim": [11, 15], "simplelpsimul": [11, 15], "init_amt": [11, 15], "create_lp": [11, 15], "get_tkn_price_sim": [11, 15], "get_x_amt_sim": [11, 15], "get_y_amt_sim": [11, 15], "sys_ax": [11, 15], "dai_ax": [11, 15], "mean": [11, 15], "w": [11, 15], "problem": 12, "solv": [12, 13], "step": 12, "solut": [12, 13, 14], "naiv": 12, "approach": 12, "ipython": 13, "displai": 13, "imag": 13, "1000000": [13, 14], "dl": [13, 17], "want": [13, 20], "know": 13, "home": 13, "let": [13, 14, 17], "l": [13, 17], "dx": [13, 14, 17], "2l": 13, "substitut": 13, "2x": 13, "nbsphinx": 13, "sim": 13, "likewis": 13, "logic": 13, "work": [13, 20], "ok": 13, "small": 13, "suppli": [13, 17], "lp_posit": 13, "naive_approxim": 13, "5f": 13, "napproach": 13, "316": 13, "22777": 13, "00000": 13, "larg": 13, "77660": 13, "complet": 13, "off": 13, "indexed_tkn": 13, "png": 13, "300": 13, "height": 13, "definit": [13, 17], "where": [13, 14, 17], "r0": [13, 17], "r1": [13, 17], "a0": [13, 17], "a1": [13, 17], "997": [13, 14, 17], "linear": [13, 17], "equat": [13, 14, 17], "eq": [13, 14, 17], "y_": [13, 17], "i": [13, 17], "def": [13, 14, 17], "calc_tkn_settl": 13, "dy1": 13, "dy2": 13, "delta_l": 13, "delta_eth": 13, "delta_dai": 13, "06315": 13, "63": 13, "14969": 13, "settlement_lp_tkn": 13, "now": [13, 14, 17], "outlin": [13, 17], "rearrang": [13, 17], "plug": [13, 14, 17], "reduc": [13, 14, 17], "quadrat": [13, 14, 17], "1000xy": [13, 17], "1000l": [13, 17], "calc_lp_settl": [13, 17], "a2": [13, 17], "c": [13, 14, 15, 16, 17, 19, 20], "delta_eth_lp": 13, "delta_dai_lp": 13, "mechanisim": 13, "back": 13, "origin": [13, 20], "against": [13, 14], "indexed_approach": 13, "2f": [13, 14], "00": 13, "87": 13, "pretti": 13, "close": 13, "try": 13, "78": 13, "excel": 13, "01583514496167512": 13, "termcolor": [14, 17], "usdc_amount": 14, "oper": 14, "perform": [14, 16, 19, 20], "incom": 14, "fund": 14, "achiev": 14, "ensur": 14, "s_": 14, "begin": [14, 17], "x_": 14, "1000x": 14, "tag": [14, 17], "highlight": 14, "why": 14, "consider": 14, "niniti": [14, 17], "n": [14, 17], "s_in": 14, "s_out": 14, "nlp": [14, 17], "post": [14, 17], "balance0": 14, "balance1": 14, "along": 14, "ntotal": 14, "6f": [14, 17], "unaccount": 14, "consid": 14, "split": [14, 17], "attr": 14, "bold": 14, "1050": [14, 17], "952517": 14, "026241844": 14, "1100": [14, 17, 19], "997874": 14, "9798724081": 14, "33128": 14, "623106525876": 14, "47482": 14, "973758155924": 14, "000000": [14, 17], "2125": 14, "02012759191": 14, "97": [14, 17], "a1_out": 14, "instead": 14, "102": 14, "34": 14, "imbal": 14, "proper": 14, "1997": 14, "correct": [14, 17], "calc_deposit_dist": 14, "calc_deposit_port": 14, "tkn_suppli": 14, "distrbut": 14, "4888217399419355": 14, "684341886080802e": 14, "through": [14, 17, 20], "compar": [14, 17], "1048": [14, 17], "8821739941936": 14, "953529": 14, "2490856305": 14, "33163": 14, "92929950274": 14, "48": [14, 17], "88217399419355": 14, "46470": 14, "75091436944": 14, "51": [14, 17], "117826005806386": 14, "882174": 14, "117826": 14, "dep": 14, "warn": 15, "pytensor": 15, "tensor": 15, "bla": 15, "0x1649c3dc0": 15, "doubl": [16, 19, 20], "just": [16, 19, 20], "leav": [16, 19, 20], "990": [16, 19], "1284196560293": [16, 19], "101000": [16, 19], "1010": [16, 19], "99012": [16, 19], "84196560294": [16, 19], "lp_tkn": 16, "0x112": 16, "lp_tkn_amount": 16, "lp2": 16, "ethtkn": 16, "10100": [16, 19], "9990": 16, "039930189601": 16, "100100": [16, 19], "10001": 16, "100010": 16, "31625": 16, "93887934396": 16, "10010": 16, "31654": 16, "399378285478": 16, "999": [16, 19], "99900": [16, 19], "10004": [16, 19], "991241237401": 16, "1001": 16, "0000000000001": [16, 19], "1009": [16, 19], "9999999999998": 16, "1004": 16, "9800695579358": 16, "upon": [16, 19], "expected_amount_out": [16, 19], "998": 16, "9999999999999": 16, "9994": [16, 19], "99123998928": 16, "99899": 16, "99999999999": 16, "989": 16, "994": 16, "9799447405355": 16, "p_eth": [16, 19], "p_tkn": [16, 19], "29": 16, "amt_tkn": [16, 19], "009969900600091017": 16, "60069810399033": 16, "199690059907018": 16, "9690059907018": 16, "28": 16, "amt_eth_lp": [16, 19], "amt_tkn_lp": [16, 19], "008760010719299": 16, "05007523748129606": 16, "mth": 17, "user_nm1": 17, "p_out": 17, "removeliq": 17, "Of": 17, "ha": 17, "10488": 17, "088481701516": 17, "95454": 17, "54545454546": 17, "10011": 17, "35718707872": 17, "1002": 17, "4094194662908": 17, "47": 17, "590581": 17, "eth_amt": 17, "488": 17, "787567": 17, "587935447692871e": 17, "reconsid": 17, "redefin": 17, "thu": 17, "therefor": 17, "solver": 17, "calc_port": 17, "calc_withdraw_port": 17, "dy": 17, "aswap": 17, "512645": 17, "735527472211": 17, "95339": 17, "59340656463": 17, "9999": 17, "300914574964": 17, "264473": 17, "735527": 17, "per": 17, "110000": 19, "11000": 19, "99000": 19, "9900": 19, "00000001659": 19, "991244978852": 19, "9999999867499": 19, "10049": 19, "801066245287": 19, "991239989282": 19, "00000000001": 19, "009969900600093062": 19, "60069810398764": 19, "19969005990709154": 19, "905136039497506": 19, "008760010717809": 19, "05007523748208768": 19, "wai": 20, "backbon": 20, "variou": 20, "defi": 20, "framework": 20, "analyz": 20, "mock": 20, "ve": 20, "best": 20, "maintain": 20, "offer": 20, "suit": 20, "familiar": 20, "support": 20, "analyst": 20, "streamlin": 20, "analyt": 20, "made": 20, "overiew": 20, "learn": 20, "visit": 20, "refer": 20, "descript": 20, "versa": 20, "aquir": 20, "enter": 20, "usabl": 20, "present": 20, "human": 20, "form": 20, "exampl": 20, "machin": 20, "gwei": 20, "3000000000000000000000": 20, "3000": 20, "4339505179874779672736325173248": 20, "paramet": 20, "toggl": 20, "pipelin": 20, "backend": 20, "permiss": 20, "herebi": 20, "grant": 20, "free": 20, "charg": 20, "person": 20, "obtain": 20, "softwar": 20, "associ": 20, "document": 20, "file": 20, "deal": 20, "without": 20, "restrict": 20, "modifi": 20, "merg": 20, "publish": 20, "sublicens": 20, "permit": 20, "whom": 20, "furnish": 20, "do": 20, "subject": 20, "condit": 20, "copyright": 20, "notic": 20, "shall": 20, "substanti": 20, "THE": 20, "IS": 20, "AS": 20, "warranti": 20, "OF": 20, "kind": 20, "express": 20, "OR": 20, "impli": 20, "BUT": 20, "TO": 20, "merchant": 20, "fit": 20, "FOR": 20, "particular": 20, "purpos": 20, "AND": 20, "noninfring": 20, "IN": 20, "NO": 20, "author": 20, "BE": 20, "liabl": 20, "claim": 20, "damag": 20, "liabil": 20, "tort": 20, "aris": 20}, "objects": {"balancerpy": [[3, 0, 0, "-", "erc"], [3, 0, 0, "-", "vault"]], "balancerpy.erc": [[3, 1, 1, "", "ERC20"]], "balancerpy.erc.ERC20": [[3, 2, 1, "", "deposit"], [3, 2, 1, "", "transfer"]], "balancerpy.vault": [[3, 1, 1, "", "BalancerVault"]], "balancerpy.vault.BalancerVault": [[3, 2, 1, "", "add_token"], [3, 2, 1, "", "check_tkn"], [3, 2, 1, "", "get_balances"], [3, 2, 1, "", "get_bounds"], [3, 2, 1, "", "get_denorm_weights"], [3, 2, 1, "", "get_dict"], [3, 2, 1, "", "get_name"], [3, 2, 1, "", "get_names"], [3, 2, 1, "", "get_norm_weights"], [3, 2, 1, "", "get_token"], [3, 2, 1, "", "get_tokens"]], "": [[3, 0, 0, "module-0", "manual_balancer"], [4, 0, 0, "module-0", "manual_stableswap"]], "manual_balancer": [[3, 1, 1, "", "BalancerExchange"], [3, 1, 1, "", "BalancerFactory"], [3, 1, 1, "", "CWPQuote"]], "manual_balancer.BalancerExchange": [[3, 2, 1, "", "burn"], [3, 2, 1, "", "exit_pool"], [3, 2, 1, "", "exit_swap_extern_amount_out"], [3, 2, 1, "", "exit_swap_pool_amount_in"], [3, 2, 1, "", "get_amount_in"], [3, 2, 1, "", "get_amount_out"], [3, 2, 1, "", "get_price"], [3, 2, 1, "", "get_reserve"], [3, 2, 1, "", "join_pool"], [3, 2, 1, "", "join_swap_extern_amount_in"], [3, 2, 1, "", "join_swap_pool_amount_out"], [3, 2, 1, "", "mint"], [3, 2, 1, "", "summary"], [3, 2, 1, "", "swap"], [3, 2, 1, "", "swap_exact_amount_in"], [3, 2, 1, "", "swap_exact_amount_out"]], "manual_balancer.BalancerFactory": [[3, 2, 1, "", "deploy"], [3, 2, 1, "", "get_exchange"], [3, 2, 1, "", "get_token"]], "manual_balancer.CWPQuote": [[3, 2, 1, "", "get_amount_from_shares"], [3, 2, 1, "", "get_shares_from_amount"]], "manual_stableswap": [[4, 1, 1, "", "CSQuote"], [4, 1, 1, "", "StableswapExchange"], [4, 1, 1, "", "StableswapFactory"]], "manual_stableswap.CSQuote": [[4, 2, 1, "", "get_lp_from_amount"]], "manual_stableswap.StableswapExchange": [[4, 2, 1, "", "add_liquidity"], [4, 2, 1, "", "burn"], [4, 2, 1, "", "get_amount_out"], [4, 2, 1, "", "get_math_pool"], [4, 2, 1, "", "get_price"], [4, 2, 1, "", "get_reserve"], [4, 2, 1, "", "join_pool"], [4, 2, 1, "", "mint"], [4, 2, 1, "", "remove_liquidity"], [4, 2, 1, "", "summary"], [4, 2, 1, "", "swap"]], "manual_stableswap.StableswapFactory": [[4, 2, 1, "", "deploy"], [4, 2, 1, "", "get_exchange"], [4, 2, 1, "", "get_token"]], "stableswappy": [[4, 0, 0, "-", "erc"], [4, 0, 0, "-", "vault"]], "stableswappy.erc": [[4, 1, 1, "", "ERC20"]], "stableswappy.erc.ERC20": [[4, 2, 1, "", "deposit"], [4, 2, 1, "", "transfer"]], "stableswappy.vault": [[4, 1, 1, "", "StableswapVault"]], "stableswappy.vault.StableswapVault": [[4, 2, 1, "", "add_token"], [4, 2, 1, "", "amt2dec"], [4, 2, 1, "", "check_tkn"], [4, 2, 1, "", "get_balances"], [4, 2, 1, "", "get_decimal_amts"], [4, 2, 1, "", "get_decimals"], [4, 2, 1, "", "get_dict"], [4, 2, 1, "", "get_name"], [4, 2, 1, "", "get_names"], [4, 2, 1, "", "get_rates"], [4, 2, 1, "", "get_token"], [4, 2, 1, "", "get_tokens"]], "uniswappy.cpt": [[6, 0, 0, "-", "exchg"], [6, 0, 0, "-", "factory"], [0, 0, 0, "-", "index"], [0, 0, 0, "-", "quote"]], "uniswappy.cpt.exchg": [[5, 1, 1, "", "UniswapExchange"], [6, 1, 1, "", "UniswapV3Exchange"]], "uniswappy.cpt.exchg.UniswapExchange": [[5, 2, 1, "", "add_liquidity"], [5, 2, 1, "", "burn"], [5, 2, 1, "", "get_amount_out"], [5, 2, 1, "", "get_amount_out0"], [5, 2, 1, "", "get_amount_out1"], [5, 2, 1, "", "get_amounts"], [5, 2, 1, "", "get_liquidity"], [5, 2, 1, "", "get_price"], [5, 2, 1, "", "get_reserve"], [5, 2, 1, "", "mint"], [5, 2, 1, "", "quote"], [5, 2, 1, "", "remove_liquidity"], [5, 2, 1, "", "summary"], [5, 2, 1, "", "swap"], [5, 2, 1, "", "swap_exact_tokens_for_tokens"], [5, 2, 1, "", "update_reserves"]], "uniswappy.cpt.exchg.UniswapV3Exchange": [[6, 2, 1, "", "burn"], [6, 2, 1, "", "checkTicks"], [6, 2, 1, "", "collect"], [6, 2, 1, "", "get_liquidity"], [6, 2, 1, "", "get_price"], [6, 2, 1, "", "get_reserve"], [6, 2, 1, "", "get_virtual_reserve"], [6, 2, 1, "", "initialize"], [6, 2, 1, "", "mint"], [6, 2, 1, "", "nextTick"], [6, 2, 1, "", "setFeeProtocol"], [6, 2, 1, "", "summary"], [6, 2, 1, "", "swap"], [6, 2, 1, "", "swap0ForExact1"], [6, 2, 1, "", "swap1ForExact0"], [6, 2, 1, "", "swapExact0For1"], [6, 2, 1, "", "swapExact1For0"]], "uniswappy.cpt.factory": [[6, 1, 1, "", "UniswapFactory"]], "uniswappy.cpt.factory.UniswapFactory": [[6, 2, 1, "", "deploy"], [6, 2, 1, "", "get_exchange"], [6, 2, 1, "", "get_token"]], "uniswappy.cpt.index": [[0, 1, 1, "", "RebaseIndexToken"], [0, 1, 1, "", "SettlementLPToken"]], "uniswappy.cpt.index.RebaseIndexToken": [[0, 2, 1, "", "apply"]], "uniswappy.cpt.index.SettlementLPToken": [[0, 2, 1, "", "apply"]], "uniswappy.cpt.quote": [[0, 1, 1, "", "IndexTokenQuote"], [0, 1, 1, "", "LPQuote"]], "uniswappy.cpt.quote.IndexTokenQuote": [[0, 2, 1, "", "base_x_asset"], [0, 2, 1, "", "base_y_asset"], [0, 2, 1, "", "get_base_lp"], [0, 2, 1, "", "get_native_x"], [0, 2, 1, "", "get_native_y"], [0, 2, 1, "", "get_x"], [0, 2, 1, "", "get_y"]], "uniswappy.cpt.quote.LPQuote": [[0, 2, 1, "", "get_amount"], [0, 2, 1, "", "get_amount_from_lp"], [0, 2, 1, "", "get_liquidity"], [0, 2, 1, "", "get_lp_from_amount"], [0, 2, 1, "", "get_opposing_token"], [0, 2, 1, "", "get_price"], [0, 2, 1, "", "get_reserve"]], "uniswappy": [[6, 0, 0, "-", "erc"]], "uniswappy.erc": [[6, 1, 1, "", "ERC20"], [6, 1, 1, "", "LPERC20"]], "uniswappy.erc.ERC20": [[6, 2, 1, "", "deposit"], [6, 2, 1, "", "transfer"]], "uniswappy.erc.LPERC20": [[6, 2, 1, "", "add_token_lp"], [6, 2, 1, "", "remove_token_lp"], [6, 2, 1, "", "set_token_lp"]], "uniswappy.process": [[0, 0, 0, "-", "deposit"], [0, 0, 0, "-", "join"], [0, 0, 0, "-", "liquidity"], [0, 0, 0, "module-0", "swap"]], "uniswappy.process.deposit": [[0, 1, 1, "", "SwapDeposit"]], "uniswappy.process.deposit.SwapDeposit": [[0, 2, 1, "", "apply"], [0, 2, 1, "", "get_trading_token"]], "uniswappy.process.join": [[0, 1, 1, "", "Join"]], "uniswappy.process.join.Join": [[0, 2, 1, "", "apply"]], "uniswappy.process.liquidity": [[0, 1, 1, "", "AddLiquidity"], [0, 1, 1, "", "RemoveLiquidity"]], "uniswappy.process.liquidity.AddLiquidity": [[0, 2, 1, "", "apply"]], "uniswappy.process.liquidity.RemoveLiquidity": [[0, 2, 1, "", "apply"]], "uniswappy.process.swap": [[0, 1, 1, "", "Swap"], [0, 1, 1, "", "WithdrawSwap"]], "uniswappy.process.swap.Swap": [[0, 2, 1, "", "apply"]], "uniswappy.process.swap.WithdrawSwap": [[0, 2, 1, "", "apply"], [0, 2, 1, "", "get_trading_token"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"]}, "titleterms": {"uniswap": [0, 1, 5, 6, 8, 9, 11, 12, 13, 15, 18], "v2": [0, 1, 5, 9, 12, 16], "v3": [0, 1, 6, 8, 18, 19], "join": [0, 7, 10, 16, 19], "swap": [0, 7, 10, 14, 16, 17, 19], "withdraw": [0, 17], "deposit": [0, 14], "liquid": [0, 7, 8, 10], "quot": [0, 3, 4], "defipi": 1, "defi": 1, "analyt": 1, "python": 1, "exampl": 1, "balanc": [1, 3, 7, 10], "stableswap": [1, 4, 10], "web3scout": 1, "welcom": 1, "s": 1, "document": 1, "content": 1, "instal": 2, "constant": [3, 5, 6], "weight": 3, "product": [3, 5, 6], "trade": [3, 4, 5, 6, 9], "vault": [3, 4], "token": [3, 4, 5, 6, 7, 10, 17], "compos": 4, "stabl": 4, "benchmark": 7, "paramet": [7, 10], "pool": [7, 8, 10], "price": [7, 8, 9, 10], "out": 7, "given": 7, "add": [7, 10], "amount": 7, "lp": 7, "share": 7, "remov": [7, 10], "order": 8, "book": 8, "simul": [8, 9, 11, 15], "setup": 8, "construct": 8, "review": 8, "output": 8, "plot": 8, "simpl": 9, "tree": 9, "script": 9, "param": 9, "data": 9, "dex": 9, "initi": 9, "take": 9, "an": 9, "invest": 9, "posit": 9, "perform": 9, "result": 9, "all": 10, "asset": 10, "usdc": 10, "dai": 10, "usdt": 10, "check": [10, 13, 14], "exchang": 10, "math": 10, "basic": [11, 15], "index": 13, "problem": [13, 14, 17], "defin": [13, 14, 17], "settlement": 13, "us": 13, "uniswappi": 13, "naiv": 13, "approach": 13, "final": [13, 14, 17], "solv": [14, 17], "step": [14, 17], "abstract": [16, 19, 20], "interfac": [16, 19, 20], "addliquid": [16, 19], "removeliquid": [16, 19], "swapdeposit": [16, 19], "withdrawswap": [16, 17, 19], "lpquot": [16, 19], "distribut": 17, "solut": 17, "usag": 20, "primit": 20, "precis": 20, "mit": 20, "licens": 20}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "nbsphinx": 4, "sphinx": 56}})