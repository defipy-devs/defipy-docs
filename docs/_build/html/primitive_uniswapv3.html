<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Uniswap V3 &mdash; DeFiPy  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Balancer" href="primitive_balancer.html" />
    <link rel="prev" title="Uniswap V2" href="primitive_uniswapv2.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #673147" >
            <a href="index.html">
            <img src="_static/defipy_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DeFi Math</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="math/univ2_math.html">Uniswap V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/univ3_math.html">Uniswap V3</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="uniswapv2/index.html">Uniswap V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="uniswapv3/index.html">Uniswap V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="balancer/index.html">Balancer</a></li>
<li class="toctree-l1"><a class="reference internal" href="stableswap/index.html">Stableswap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Analytics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tutorials/univ2_sim.html">Uniswap V2 Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/order_book.html">Uniswap V3 Order Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/imp_loss.html">Impermanent Loss</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/fsm.html">Finite State Machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/simple_tree_pt1.html">Simple Uni V2 Tree (Part 1)</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/simple_tree_pt2.html">Simple Uni V2 Tree (Part 2)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Abstract API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="abstract_uniswap.html">Uniswap V2/V3</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Primitive API</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="primitive_uniswapv2.html">Uniswap V2</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Uniswap V3</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-uniswappy.cpt.factory">Constant Product Trading</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-uniswappy.erc">Tokens</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="primitive_balancer.html">Balancer</a></li>
<li class="toctree-l1"><a class="reference internal" href="primitive_stableswap.html">StableSwap</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #673147" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DeFiPy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Uniswap V3</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/primitive_uniswapv3.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="uniswap-v3">
<span id="primitive-uniswapv3"></span><h1>Uniswap V3<a class="headerlink" href="#uniswap-v3" title="Permalink to this heading"></a></h1>
<section id="module-uniswappy.cpt.factory">
<span id="constant-product-trading"></span><h2>Constant Product Trading<a class="headerlink" href="#module-uniswappy.cpt.factory" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="uniswappy.cpt.factory.UniswapFactory">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">uniswappy.cpt.factory.</span></span><span class="sig-name descname"><span class="pre">UniswapFactory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.factory.UniswapFactory" title="Permalink to this definition"></a></dt>
<dd><p>Create Uniswap liquidity pools for given token pairs</p>
<dl class="simple">
<dt>name<span class="classifier">str</span></dt><dd><p>Token name</p>
</dd>
<dt>address<span class="classifier">str</span></dt><dd><p>Token 0 name</p>
</dd>
<dt>exchange_from_token<span class="classifier">dictionary</span></dt><dd><p>Map of tokens to exchanges</p>
</dd>
<dt>tokens_from_exchange<span class="classifier">dictionary</span></dt><dd><p>Map of exchanges to pair tokens</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.factory.UniswapFactory.deploy">
<span class="sig-name descname"><span class="pre">deploy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exchg_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UniswapExchangeData</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.factory.UniswapFactory.deploy" title="Permalink to this definition"></a></dt>
<dd><p>Deploy a Uniswap liquidity pool (LP) exchange</p>
<dl class="simple">
<dt>exchg_data<span class="classifier">UniswapExchangeData</span></dt><dd><p>Uniswap exchange initialization data</p>
</dd>
</dl>
<dl class="simple">
<dt>exchange<span class="classifier">UniswapExchange</span></dt><dd><p>Newly created exchange that is also a LP token</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.factory.UniswapFactory.get_exchange">
<span class="sig-name descname"><span class="pre">get_exchange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.factory.UniswapFactory.get_exchange" title="Permalink to this definition"></a></dt>
<dd><p>Get exchange from given pair token</p>
<dl class="simple">
<dt>token<span class="classifier">ERC20</span></dt><dd><p>receiving user address</p>
</dd>
</dl>
<dl class="simple">
<dt>exchange<span class="classifier">UniswapExchange</span></dt><dd><p>exchange from mapped token</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.factory.UniswapFactory.get_token">
<span class="sig-name descname"><span class="pre">get_token</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exchange</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.factory.UniswapFactory.get_token" title="Permalink to this definition"></a></dt>
<dd><p>Get token from exchange</p>
<dl class="simple">
<dt>exchange<span class="classifier">UniswapExchange</span></dt><dd><p>receiving user address</p>
</dd>
</dl>
<dl class="simple">
<dt>token<span class="classifier">ERC20 </span></dt><dd><p>token from mapped exchange</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-uniswappy.cpt.exchg"></span><dl class="py class">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">uniswappy.cpt.exchg.</span></span><span class="sig-name descname"><span class="pre">UniswapV3Exchange</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">factory_struct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">FactoryData</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exchg_struct</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">UniswapExchangeData</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange" title="Permalink to this definition"></a></dt>
<dd><p>Uniswap V3 Exchange</p>
<dl class="simple">
<dt>factory_struct<span class="classifier">FactoryInit</span></dt><dd><p>Factory initialization data</p>
</dd>
<dt>exchg_struct<span class="classifier">UniswapExchangeInit</span></dt><dd><p>Exchange initialization data</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.burn">
<span class="sig-name descname"><span class="pre">burn</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tickLower</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tickUpper</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.burn" title="Permalink to this definition"></a></dt>
<dd><p>Burn liquidity from the sender and account tokens owed for the liquidity to the position. Can 
be used to trigger a recalculation of fees owed to a position by calling with an amount of 0. 
Fees must be collected separately via a call to collect</p>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>tickLower<span class="classifier">int</span></dt><dd><p>Lower tick of the position in which to add liquidity</p>
</dd>
<dt>tickUpper<span class="classifier">int</span></dt><dd><p>Lower tick of the position in which to add liquidity</p>
</dd>
<dt>amount<span class="classifier">int</span></dt><dd><p>How much liquidity to burn</p>
</dd>
</dl>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>amount0<span class="classifier">int</span></dt><dd><p>Delta of the balance of token0 of the pool, exact when negative, minimum when positive</p>
</dd>
<dt>amount1<span class="classifier">int</span></dt><dd><p>Delta of the balance of token1 of the pool, exact when negative, minimum when positive</p>
</dd>
<dt>amount<span class="classifier">int</span></dt><dd><p>How much liquidity to burn</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.checkTicks">
<span class="sig-name descname"><span class="pre">checkTicks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tickLower</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tickUpper</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.checkTicks" title="Permalink to this definition"></a></dt>
<dd><p>Common checks for valid tick inputs</p>
<dl class="simple">
<dt>tickLower<span class="classifier">int</span></dt><dd><p>Lower tick of the position in which to add liquidity</p>
</dd>
<dt>tickUpper<span class="classifier">int</span></dt><dd><p>Lower tick of the position in which to add liquidity</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.collect">
<span class="sig-name descname"><span class="pre">collect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tickLower</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tickUpper</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount0Requested</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount1Requested</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.collect" title="Permalink to this definition"></a></dt>
<dd><p>Collects tokens owed to a position. Does not recompute fees earned, which must be done either 
via mint or burn of any amount of liquidity. Collect must be called by the position owner. 
To withdraw only token0 or only token1, amount0Requested or amount1Requested may be set to zero. 
To withdraw all tokens owed, caller may pass any value greater than the actual tokens owed, e.g. 
type(uint128).max. Tokens owed may be from accumulated swap fees or burned liquidity.</p>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>tickLower<span class="classifier">int</span></dt><dd><p>Lower tick of the position in which to add liquidity</p>
</dd>
<dt>tickUpper<span class="classifier">int</span></dt><dd><p>Lower tick of the position in which to add liquidity</p>
</dd>
<dt>amount0Requested<span class="classifier">int</span></dt><dd><p>How much token0 should be withdrawn from the fees owed</p>
</dd>
<dt>amount1Requested<span class="classifier">int</span></dt><dd><p>How much token1 should be withdrawn from the fees owed</p>
</dd>
</dl>
<dl class="simple">
<dt>amount0<span class="classifier">float</span></dt><dd><p>Amount of token0 that was paid to mint the given amount of liquidity.</p>
</dd>
<dt>amount1<span class="classifier">float</span></dt><dd><p>Amount of token1 that was paid to mint the given amount of liquidity.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.get_last_liquidity_deposit">
<span class="sig-name descname"><span class="pre">get_last_liquidity_deposit</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.get_last_liquidity_deposit" title="Permalink to this definition"></a></dt>
<dd><p>Get the last liquidity deposit that went into pool</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.get_liquidity">
<span class="sig-name descname"><span class="pre">get_liquidity</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.get_liquidity" title="Permalink to this definition"></a></dt>
<dd><p>Get liquidity of exchange pool</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.get_liquidity_from_provider">
<span class="sig-name descname"><span class="pre">get_liquidity_from_provider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">provider_account</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.get_liquidity_from_provider" title="Permalink to this definition"></a></dt>
<dd><p>Get liquidity from provider</p>
<dl class="simple">
<dt>provider_account<span class="classifier">str</span></dt><dd><p>Provider account name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.get_price">
<span class="sig-name descname"><span class="pre">get_price</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.get_price" title="Permalink to this definition"></a></dt>
<dd><p>Get price of select token in the exchange pair</p>
<dl class="simple">
<dt>token<span class="classifier">ERC20</span></dt><dd><p>ERC20 token</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.get_reserve">
<span class="sig-name descname"><span class="pre">get_reserve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.get_reserve" title="Permalink to this definition"></a></dt>
<dd><p>Get reserve amount of select token in the exchange pair</p>
<dl class="simple">
<dt>token<span class="classifier">ERC20</span></dt><dd><p>ERC20 token</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.get_virtual_reserve">
<span class="sig-name descname"><span class="pre">get_virtual_reserve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.get_virtual_reserve" title="Permalink to this definition"></a></dt>
<dd><p>Get virtual reserve amount of select token in the exchange pair</p>
<dl class="simple">
<dt>token<span class="classifier">ERC20</span></dt><dd><p>ERC20 token</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.initialize">
<span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sqrtPriceX96</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.initialize" title="Permalink to this definition"></a></dt>
<dd><p>Sets the initial price for the pool</p>
<dl class="simple">
<dt>sqrtPriceX96<span class="classifier">float</span></dt><dd><p>the initial sqrt price of the pool as a Q64.96</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.mint">
<span class="sig-name descname"><span class="pre">mint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tickLower</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tickUpper</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.mint" title="Permalink to this definition"></a></dt>
<dd><p>Adds liquidity for the given recipient/tickLower/tickUpper position. The final amounts 
calculated are automatically transferred from the swapper to the pool and vice verse. 
The amount of token0/token1 due depends on tickLower, tickUpper, the amount of liquidity, 
and the current price.</p>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>tickLower<span class="classifier">int</span></dt><dd><p>Lower tick of the position in which to add liquidity</p>
</dd>
<dt>tickUpper<span class="classifier">int</span></dt><dd><p>Upper tick of the position in which to add liquidity</p>
</dd>
<dt>amount<span class="classifier">int</span></dt><dd><p>Amount of liquidity to mint</p>
</dd>
</dl>
<dl class="simple">
<dt>amount0<span class="classifier">float</span></dt><dd><p>Amount of token0 that was paid to mint the given amount of liquidity.</p>
</dd>
<dt>amount1<span class="classifier">float</span></dt><dd><p>Amount of token1 that was paid to mint the given amount of liquidity.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.nextTick">
<span class="sig-name descname"><span class="pre">nextTick</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tick</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lte</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.nextTick" title="Permalink to this definition"></a></dt>
<dd><p>It is assumed that the keys are within [MIN_TICK , MAX_TICK], which should always be the 
case. We don’t run the risk of overshooting tickNext (out of boundaries) as long as ticks 
(keys) have been initialized within the boundaries. However, if there is no initialized 
tick to the left or right we will return the next boundary. Then we need to return the 
initialized bool to indicate that we are at the boundary and it is not an initalized tick.</p>
<dl class="simple">
<dt>tick<span class="classifier">int</span></dt><dd><p>The starting tick</p>
</dd>
<dt>lte<span class="classifier">int</span></dt><dd><p>Whether to search for the next initialized tick to the left (less than or equal to the starting tick)</p>
</dd>
</dl>
<dl class="simple">
<dt>nextTick<span class="classifier">int</span></dt><dd><p>Next tick with liquidity to be used in the swap function</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.setFeeProtocol">
<span class="sig-name descname"><span class="pre">setFeeProtocol</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feeProtocol0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feeProtocol1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.setFeeProtocol" title="Permalink to this definition"></a></dt>
<dd><p>Set the denominator of the protocol’s % share of the fees</p>
<dl class="simple">
<dt>feeProtocol0<span class="classifier">int</span></dt><dd><p>New protocol fee for token0 of the pool</p>
</dd>
<dt>feeProtocol1<span class="classifier">int</span></dt><dd><p>New protocol fee for token1 of the pool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.summary" title="Permalink to this definition"></a></dt>
<dd><p>Summary print-out of exchange, reserves and liquidity</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.swap">
<span class="sig-name descname"><span class="pre">swap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zeroForOne</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amountSpecified</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sqrtPriceLimitX96</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.swap" title="Permalink to this definition"></a></dt>
<dd><p>Swap token0 for token1, or token1 for token0. The tokens are automatically transferred 
at the end of the swapping function.</p>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>zeroForOne<span class="classifier">int</span></dt><dd><p>the direction of the swap, true for token0 to token1, false for token1 to token0</p>
</dd>
<dt>amountSpecified<span class="classifier">int</span></dt><dd><p>The amount of the swap, which implicitly configures the swap as exact input 
(positive), or exact output (negative)</p>
</dd>
<dt>sqrtPriceLimitX96<span class="classifier">int</span></dt><dd><p>The Q64.96 sqrt price limit. If zero for one, the price cannot be less than this 
value after the swap. If one for zero, the price cannot be greater than this 
value after the swap</p>
</dd>
</dl>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>amount0<span class="classifier">int</span></dt><dd><p>Delta of the balance of token0 of the pool, exact when negative, minimum when positive</p>
</dd>
<dt>amount1<span class="classifier">int</span></dt><dd><p>Delta of the balance of token1 of the pool, exact when negative, minimum when positive</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.swap0ForExact1">
<span class="sig-name descname"><span class="pre">swap0ForExact1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sqrtPriceLimit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.swap0ForExact1" title="Permalink to this definition"></a></dt>
<dd><p>swapExact0For1</p>
<p>Swap token0 for exact value of token1</p>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>amount<span class="classifier">int</span></dt><dd><p>How much token to swap</p>
</dd>
<dt>sqrtPriceLimit<span class="classifier">int</span></dt><dd><p>Used to determine the highest price in the swap, and needs to be set when swapping 
on the pool directly.</p>
</dd>
</dl>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>amount0<span class="classifier">int</span></dt><dd><p>Delta of the balance of token0 of the pool, exact when negative, minimum when positive</p>
</dd>
<dt>amount1<span class="classifier">int</span></dt><dd><p>Delta of the balance of token1 of the pool, exact when negative, minimum when positive</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.swap1ForExact0">
<span class="sig-name descname"><span class="pre">swap1ForExact0</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sqrtPriceLimit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.swap1ForExact0" title="Permalink to this definition"></a></dt>
<dd><p>swapExact0For1</p>
<p>Swap token1 for exact value of token0</p>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>amount<span class="classifier">int</span></dt><dd><p>How much token to swap</p>
</dd>
<dt>sqrtPriceLimit<span class="classifier">int</span></dt><dd><p>Used to determine the highest price in the swap, and needs to be set when swapping 
on the pool directly.</p>
</dd>
</dl>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>amount0<span class="classifier">int</span></dt><dd><p>Delta of the balance of token0 of the pool, exact when negative, minimum when positive</p>
</dd>
<dt>amount1<span class="classifier">int</span></dt><dd><p>Delta of the balance of token1 of the pool, exact when negative, minimum when positive</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.swapExact0For1">
<span class="sig-name descname"><span class="pre">swapExact0For1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sqrtPriceLimit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.swapExact0For1" title="Permalink to this definition"></a></dt>
<dd><p>Swap exact value of token0 for token1</p>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>amount<span class="classifier">int</span></dt><dd><p>How much token to swap</p>
</dd>
<dt>sqrtPriceLimit<span class="classifier">int</span></dt><dd><p>Used to determine the highest price in the swap, and needs to be set when swapping on 
the pool directly.</p>
</dd>
</dl>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>amount0<span class="classifier">int</span></dt><dd><p>Delta of the balance of token0 of the pool, exact when negative, minimum when positive</p>
</dd>
<dt>amount1<span class="classifier">int</span></dt><dd><p>Delta of the balance of token1 of the pool, exact when negative, minimum when positive</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.cpt.exchg.UniswapV3Exchange.swapExact1For0">
<span class="sig-name descname"><span class="pre">swapExact1For0</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">recipient</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amount</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sqrtPriceLimit</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.cpt.exchg.UniswapV3Exchange.swapExact1For0" title="Permalink to this definition"></a></dt>
<dd><p>swapExact0For1</p>
<p>Swap exact value of token1 for token0</p>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>amount<span class="classifier">int</span></dt><dd><p>How much token to swap</p>
</dd>
<dt>sqrtPriceLimit<span class="classifier">int</span></dt><dd><p>Used to determine the highest price in the swap, and needs to be set when swapping 
on the pool directly.</p>
</dd>
</dl>
<dl class="simple">
<dt>recipient<span class="classifier">str</span></dt><dd><p>Address for which the liquidity will be created</p>
</dd>
<dt>amount0<span class="classifier">int</span></dt><dd><p>Delta of the balance of token0 of the pool, exact when negative, minimum when positive</p>
</dd>
<dt>amount1<span class="classifier">int</span></dt><dd><p>Delta of the balance of token1 of the pool, exact when negative, minimum when positive</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-uniswappy.erc">
<span id="tokens"></span><h2>Tokens<a class="headerlink" href="#module-uniswappy.erc" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="uniswappy.erc.ERC20">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">uniswappy.erc.</span></span><span class="sig-name descname"><span class="pre">ERC20</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">decimal</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.13)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.erc.ERC20" title="Permalink to this definition"></a></dt>
<dd><p>ERC20 token</p>
<dl class="simple">
<dt>token_name<span class="classifier">str</span></dt><dd><p>Token name</p>
</dd>
<dt>token_addr<span class="classifier">str</span></dt><dd><p>Token address</p>
</dd>
<dt>token_total<span class="classifier">float</span></dt><dd><p>Token holdings</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.erc.ERC20.deposit">
<span class="sig-name descname"><span class="pre">deposit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_from</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.erc.ERC20.deposit" title="Permalink to this definition"></a></dt>
<dd><p>Deposit token</p>
<dl class="simple">
<dt>_from<span class="classifier">str</span></dt><dd><p>user address</p>
</dd>
<dt>value<span class="classifier">str</span></dt><dd><p>delta to add to total</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.erc.ERC20.transfer">
<span class="sig-name descname"><span class="pre">transfer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_to</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.erc.ERC20.transfer" title="Permalink to this definition"></a></dt>
<dd><p>Transfer token</p>
<dl class="simple">
<dt>_to<span class="classifier">str</span></dt><dd><p>user address</p>
</dd>
<dt>value<span class="classifier">str</span></dt><dd><p>delta to remove from total</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="uniswappy.erc.LPERC20">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">uniswappy.erc.</span></span><span class="sig-name descname"><span class="pre">LPERC20</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.erc.LPERC20" title="Permalink to this definition"></a></dt>
<dd><p>DAOSYS ERC20 token</p>
<dl class="simple">
<dt>token_name<span class="classifier">str</span></dt><dd><p>Token name</p>
</dd>
<dt>token_addr<span class="classifier">str</span></dt><dd><p>Token address</p>
</dd>
<dt>token_total<span class="classifier">float</span></dt><dd><p>Token holdings</p>
</dd>
<dt>type<span class="classifier">float</span></dt><dd><p>Token type</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.erc.LPERC20.add_token_lp">
<span class="sig-name descname"><span class="pre">add_token_lp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.erc.LPERC20.add_token_lp" title="Permalink to this definition"></a></dt>
<dd><p>Add token delta to token total</p>
<dl class="simple">
<dt>value<span class="classifier">float</span></dt><dd><p>token delta</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.erc.LPERC20.remove_token_lp">
<span class="sig-name descname"><span class="pre">remove_token_lp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.erc.LPERC20.remove_token_lp" title="Permalink to this definition"></a></dt>
<dd><p>Remove token delta to token total</p>
<dl class="simple">
<dt>value<span class="classifier">float</span></dt><dd><p>token delta</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="uniswappy.erc.LPERC20.set_token_lp">
<span class="sig-name descname"><span class="pre">set_token_lp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">token_total</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#uniswappy.erc.LPERC20.set_token_lp" title="Permalink to this definition"></a></dt>
<dd><p>Reset token LP</p>
<dl class="simple">
<dt>token_total<span class="classifier">float</span></dt><dd><p>token total</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="primitive_uniswapv2.html" class="btn btn-neutral float-left" title="Uniswap V2" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="primitive_balancer.html" class="btn btn-neutral float-right" title="Balancer" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Read the Docs core team.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>