Search.setIndex({"docnames": ["abstract_uniswap", "index", "installation", "primitive_balancer", "primitive_stableswap", "primitive_uniswapv2", "primitive_uniswapv3", "tutorials/balancer_test", "tutorials/order_book", "tutorials/simple_tree_pt1", "tutorials/simple_tree_pt2", "tutorials/stableswap_test", "tutorials/uniswap_simulation", "uniswapv2/index", "uniswapv2/tutorials/indexing_problem", "uniswapv2/tutorials/machine_precision", "uniswapv2/tutorials/swap_deposit", "uniswapv2/tutorials/uniswap_simulation", "uniswapv2/tutorials/uniswap_v2", "uniswapv2/tutorials/withdraw_swap", "uniswapv3/index", "uniswapv3/tutorials/uniswap_v3", "usage"], "filenames": ["abstract_uniswap.rst", "index.rst", "installation.rst", "primitive_balancer.rst", "primitive_stableswap.rst", "primitive_uniswapv2.rst", "primitive_uniswapv3.rst", "tutorials/balancer_test.ipynb", "tutorials/order_book.ipynb", "tutorials/simple_tree_pt1.ipynb", "tutorials/simple_tree_pt2.ipynb", "tutorials/stableswap_test.ipynb", "tutorials/uniswap_simulation.ipynb", "uniswapv2/index.rst", "uniswapv2/tutorials/indexing_problem.ipynb", "uniswapv2/tutorials/machine_precision.ipynb", "uniswapv2/tutorials/swap_deposit.ipynb", "uniswapv2/tutorials/uniswap_simulation.ipynb", "uniswapv2/tutorials/uniswap_v2.ipynb", "uniswapv2/tutorials/withdraw_swap.ipynb", "uniswapv3/index.rst", "uniswapv3/tutorials/uniswap_v3.ipynb", "usage.rst"], "titles": ["Uniswap V2/V3", "DeFiPy: DeFi Analytics with Python", "Installation", "Balancer", "StableSwap", "Uniswap V2", "Uniswap V3", "Balancer", "Uniswap V3 Order Book", "Simple Uni V2 Tree (Part 1)", "Simple Uni V2 Tree (Part 2)", "Stableswap", "Basic Uniswap Simulation", "Uniswap V2", "Indexing Problem", "Machine Precision", "Swap-Deposit", "Basic Uniswap Simulation", "Abstract Interface (V2)", "Withdraw-Swap", "Uniswap V3", "Abstract Interface (V3)", "Usage"], "terms": {"class": [0, 1, 3, 4, 5, 6], "uniswappi": [0, 1, 5, 6, 8, 9, 10, 12, 13, 16, 17, 18, 19], "process": [0, 8, 10], "x": [0, 8, 9, 10, 12, 14, 16, 17, 18, 19, 21, 22], "y": [0, 8, 9, 10, 14, 16, 18, 19, 21, 22], "amount": [0, 1, 3, 4, 5, 6, 10, 12, 16, 17, 18, 21, 22], "pool": [0, 1, 3, 4, 5, 6, 9, 10, 12, 14, 15, 16, 17, 18, 19, 21, 22], "appli": [0, 1, 8, 9, 10, 15, 16, 18, 19, 21], "lp": [0, 1, 3, 4, 5, 6, 8, 9, 10, 11, 14, 15, 16, 18, 19, 21, 22], "user_nm": [0, 1, 5, 8, 9, 10, 14, 15, 16, 18, 19, 21], "amount0": [0, 1, 6], "amount1": [0, 1, 6], "lwr_tick": [0, 1, 8, 21], "none": [0, 1, 4, 5, 6, 7, 11], "upr_tick": [0, 1, 8, 21], "exchang": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 14, 15, 16, 18, 19, 21], "str": [0, 3, 4, 5, 6, 11, 16], "account": [0, 5, 6, 8, 14], "name": [0, 3, 4, 5, 6, 16], "float": [0, 3, 4, 5, 6, 7, 11], "token": [0, 1, 9, 10, 13, 14, 15, 16, 18, 21, 22], "int": [0, 4, 5, 6, 8, 9, 10], "lower": [0, 6], "tick": [0, 6, 8], "posit": [0, 6], "which": [0, 1, 6, 16, 22], "add": [0, 3, 4, 5, 6, 18, 21], "upper": [0, 6, 12, 17], "out": [0, 1, 3, 4, 5, 6, 8, 16, 18, 19, 22], "dictionari": [0, 3, 4, 5, 6], "output": [0, 1, 3, 4, 5, 6, 22], "ev": 0, "tdel": 0, "vice": [0, 6, 18, 21, 22], "vers": [0, 6, 18, 21], "eventselectionmodel": [0, 8], "object": [0, 1, 3, 4, 22], "randomli": 0, "gener": 0, "bui": 0, "vs": [0, 9, 10], "sell": [0, 22], "event": [0, 1, 10, 22], "tokendeltamodel": [0, 8, 9, 10], "token_in": [0, 5, 7, 14, 16, 19], "amount_in": [0, 3, 4, 5], "sqrt_price_limit": 0, "erc20": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 21], "specifi": [0, 4, 22], "amount_out_expect": [0, 5], "withdrawswap": [0, 10, 13, 15, 20, 22], "from": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 21, 22], "oppos": [0, 5, 9, 10, 16, 18, 21], "ad": [0, 7], "specif": [0, 3, 4, 16], "receiv": [0, 3, 4, 5, 6, 16], "singl": [0, 3, 18, 21, 22], "token_out": [0, 7, 19], "amount_out": [0, 5, 18], "withdrawn": [0, 6, 19], "get_trading_token": 0, "get": [0, 3, 4, 5, 6, 10, 14, 16, 18, 19, 21], "trading_token": [0, 19], "swapdeposit": [0, 9, 10, 13, 15, 16, 20, 22], "approx": [0, 16], "half": 0, "proce": 0, "plu": 0, "remain": [0, 16, 18, 21, 22], "other": [0, 3, 4, 5, 22], "approxim": [0, 14, 22], "addliquid": [0, 8, 10, 13, 15, 20, 22], "init_pric": [0, 1], "us": [0, 1, 3, 4, 6, 8, 9, 10, 13, 16, 17, 18, 19, 21, 22], "onli": [0, 1, 6, 14, 18, 21], "removeliquid": [0, 10, 13, 15, 19, 20, 22], "remov": [0, 3, 4, 5, 6, 10, 18, 21], "reserv": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 21], "cpt": [0, 5, 6, 14, 19], "indextokenquot": 0, "quote_native_token": 0, "true": [0, 3, 4, 6, 8, 9, 10, 15, 18], "index": [0, 8, 9, 10, 13, 19], "boolean": [0, 3, 4], "base": [0, 3, 4, 5, 7, 17, 18, 21], "otherwis": [0, 22], "base_x_asset": 0, "asset": [0, 1, 3, 4, 5, 7, 14, 16, 18, 21], "pair": [0, 1, 3, 4, 5, 6, 18, 21, 22], "uniswapexchang": [0, 3, 4, 5, 6], "base_y_asset": 0, "get_base_lp": 0, "tkn": [0, 3, 4, 8, 9, 10, 11, 12, 16, 17, 18, 19, 21], "return": [0, 5, 6, 9, 10, 14, 16, 18, 19, 21, 22], "parent": [0, 9, 10], "given": [0, 3, 4, 5, 6, 14, 16, 18, 19, 21], "child": [0, 9, 10], "one": [0, 1, 6, 16, 18, 21, 22], "its": [0, 3, 4, 14], "get_native_x": 0, "tkn_x": 0, "x_amt": 0, "get_native_i": 0, "tkn_y": 0, "y_amt": 0, "get_x": 0, "amt_lp": 0, "an": [0, 1, 3, 4, 5, 6, 7, 8, 16, 22], "hold": [0, 3, 4, 5, 6], "ie": [0, 1, 3, 4, 9, 10, 14, 19], "xy": [0, 14, 19], "k": [0, 8, 9, 10, 11, 12, 17], "get_i": 0, "lpquot": [0, 9, 10, 13, 14, 15, 20, 22], "quote_oppos": [0, 14], "include_fe": [0, 15, 18], "fals": [0, 4, 6, 8, 9, 10, 12, 14, 15, 17, 18, 21], "price": [0, 3, 4, 5, 6, 12, 15, 17, 18, 21, 22], "default": [0, 22], "get_amount": [0, 5, 15, 18, 21], "input": [0, 3, 4, 5, 6], "amt_out": [0, 3, 10, 19], "get_amount_from_lp": [0, 9, 10, 14, 15, 18, 21], "amount_lp_in": 0, "get_liquid": [0, 5, 6, 14, 18], "get_lp_from_amount": [0, 4, 9, 14, 18, 21], "get_opposing_token": 0, "get_pric": [0, 3, 4, 5, 6, 7, 8, 9, 10, 11, 15, 18, 21], "respect": 0, "get_reserv": [0, 3, 4, 5, 6, 9, 10, 11, 14, 15, 16], "rebaseindextoken": [0, 9], "determin": [0, 6, 16, 18, 19, 21], "rebas": [0, 18, 21], "certain": [0, 16], "invers": 0, "settlementlptoken": [0, 9], "liq_amt": 0, "calcul": [0, 6, 7, 16, 19, 22], "settlement": [0, 18, 19, 21], "what": [0, 1], "term": 0, "rebase_amount": 0, "itkn_amt": [0, 14, 19], "lp_amount": 0, "world": 1, "first": [1, 2, 16], "packag": [1, 2], "all": [1, 3, 4, 6, 7, 14, 16, 22], "major": 1, "protocol": [1, 2, 6, 22], "integr": [1, 16, 19, 22], "sinc": 1, "built": 1, "modular": 1, "design": 1, "mind": 1, "you": [1, 22], "can": [1, 6, 14, 16, 19, 22], "silo": 1, "your": [1, 2], "balancerpi": [1, 3], "stableswappi": [1, 4], "For": [1, 16], "surveil": 1, "checkout": 1, "To": [1, 2, 6, 16, 22], "setup": [1, 2, 22], "liquid": [1, 3, 4, 5, 6, 9, 10, 12, 14, 15, 16, 17, 18, 19, 21, 22], "must": [1, 2, 6, 16], "creat": [1, 3, 4, 5, 6], "next": [1, 6], "factori": [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 14, 15, 16, 18, 19, 21], "uniswapexchangedata": [1, 5, 6, 8, 9, 10, 14, 15, 16, 18, 19, 21], "data": [1, 3, 4, 5, 6, 8], "avail": [1, 22], "via": [1, 3, 6, 14, 18, 19, 21, 22], "primit": 1, "api": [1, 9, 10, 17, 22], "also": [1, 2, 3, 4, 5, 6], "abstract": [1, 13, 20], "tool": 1, "see": [1, 2, 14, 16], "interfac": [1, 13, 20], "tutori": [1, 22], "basic": 1, "follow": [1, 7, 14, 16, 19, 22], "import": [1, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 21], "user_intro": 1, "eth_amount": [1, 8, 14, 15, 16, 18, 19, 21], "3162": 1, "277660168379": 1, "dai_amount": [1, 10, 14, 15], "316227": 1, "7660168379": 1, "dai": [1, 7, 12, 14, 15, 17], "0x111": [1, 7, 8, 9, 10, 12, 14, 15, 16, 17, 18, 19, 21], "eth": [1, 8, 14, 15, 16, 18, 19, 21], "0x09": [1, 7, 8, 9, 10, 12, 14, 15, 16, 17, 18, 19, 21], "exchg_data": [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 14, 15, 16, 18, 19, 21], "tkn0": [1, 8, 9, 10, 14, 15, 16, 18, 19, 21], "tkn1": [1, 8, 9, 10, 14, 15, 16, 18, 19, 21], "symbol": [1, 3, 4, 7, 8, 9, 10, 11, 14, 15, 16, 18, 19, 21], "address": [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 14, 15, 16, 18, 19, 21], "0x011": [1, 7, 8, 9, 10, 11, 14, 15, 16, 18, 19, 21], "uniswapfactori": [1, 5, 6, 8, 9, 10, 14, 15, 16, 18, 19, 21], "0x2": [1, 7, 8, 9, 10, 11, 14, 15, 16, 18, 19, 21], "deploi": [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 14, 15, 16, 18, 19, 21], "add_liquid": [1, 4, 5, 11, 14, 16, 19], "user0": [1, 9, 10, 16, 19, 21], "summari": [1, 3, 4, 5, 6, 7, 8, 9, 10, 11, 14, 15, 16, 18, 19, 21], "31622": [1, 14, 16, 18], "776601683792": [1, 14, 16, 18], "simular": 1, "abov": [1, 2, 14, 16, 19, 22], "onc": [1, 2], "thi": [1, 6, 14, 16, 22], "unlimit": 1, "user": [1, 3, 4, 5, 6, 7, 11, 18], "fee": [1, 4, 5, 6, 8, 9, 10, 14, 15, 18, 19, 21], "univ3util": [1, 8, 21], "feeamount": [1, 8, 21], "medium": [1, 8, 9, 10, 12, 17, 21], "tick_spac": [1, 8, 21], "getmintick": [1, 21], "getmaxtick": [1, 21], "encodepricesqrt": 1, "100": [1, 7, 8, 9, 10, 14, 15, 16, 18, 19, 21], "1": [1, 7, 8, 10, 11, 12, 13, 14, 16, 17, 18, 19, 21], "version": [1, 8, 21, 22], "initi": [1, 3, 4, 5, 6, 7, 16, 19], "mint": [1, 3, 4, 5, 6, 10], "left": [1, 6, 12, 14, 16, 17, 19, 22], "side": [1, 8, 18, 21, 22], "menu": [1, 22], "serv": 1, "extens": 1, "constant": [1, 4, 14, 19], "product": [1, 4, 14, 19], "trade": [1, 14, 18, 19, 21, 22], "handl": [1, 2, 10], "more": [1, 2, 22], "than": [1, 6], "two": [1, 7, 16, 22], "ar": [1, 6, 7, 10, 14, 16, 22], "known": 1, "weight": [1, 4, 7, 8], "As": [1, 14, 22], "both": [1, 5, 14, 16], "muilt": 1, "thei": 1, "have": [1, 2, 6, 14, 16, 22], "call": [1, 3, 4, 6], "vault": [1, 7, 10, 11], "tout": 1, "being": 1, "defin": [1, 13], "featur": 1, "henc": [1, 14, 19], "we": [1, 6, 8, 14, 16, 19, 22], "includ": [1, 9, 10, 16, 22], "balancervault": [1, 3, 7], "stableswapvault": [1, 4, 11], "shown": 1, "user_test": [1, 7, 11, 14], "amt_dai": [1, 7, 11, 15], "10000000": [1, 7], "denorm_wt_dai": [1, 7], "10": [1, 7, 8, 9, 10, 11, 12, 15, 17, 18, 21, 22], "amt_eth": [1, 7, 15, 18, 21], "67738": [1, 7], "6361731024": [1, 7], "denorm_wt_eth": [1, 7], "40": [1, 7, 14, 15], "init_pool_shar": [1, 7], "0x01": 1, "deposit": [1, 3, 4, 5, 6, 7, 8, 11, 13, 14, 18, 19, 21, 22], "weth": [1, 7], "0x02": 1, "bgrp": [1, 7], "add_token": [1, 3, 4, 7, 11], "bfactori": [1, 7], "balancerfactori": [1, 3, 7], "0x": 1, "balancerexchangedata": [1, 3, 7], "0x1": 1, "join_pool": [1, 3, 4, 7, 11], "0": [1, 5, 6, 7, 8, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 21], "2": [1, 7, 8, 9, 11, 12, 13, 14, 16, 17, 19, 21, 22], "8": [1, 7, 8, 9, 10, 11, 12, 17, 21], "share": [1, 3, 4, 6], "lesser": 1, "implement": [1, 4, 7, 17, 22], "compos": 1, "stabl": 1, "ideal": 1, "set": [1, 3, 4, 6, 14, 22], "up": [1, 14], "coin": [1, 5], "ampl_coeff": [1, 4, 11], "2000": [1, 8, 9, 10, 11, 14], "79566307": [1, 11], "559825807715868071": [1, 11], "decimal_dai": [1, 11], "18": [1, 7, 8, 9, 10, 11, 12, 16, 17, 18, 19, 21, 22], "amt_usdc": [1, 11], "81345068": [1, 11], "187939": [1, 11], "decimal_usdc": [1, 11], "6": [1, 7, 8, 10, 11, 12, 16, 17, 21], "amt_usdt": [1, 11], "55663250": [1, 11], "772939": [1, 11], "decimal_usdt": [1, 11], "usdc": [1, 9, 10, 15, 16], "usdt": [1, 9, 10, 15], "0x03": 1, "sgrp": [1, 11], "sfactori": [1, 11], "stableswapfactori": [1, 4, 11], "stableswapexchangedata": [1, 4, 11], "0x11": 1, "55982581": [1, 11], "216573027": [1, 11], "91811988": [1, 11], "pull": [1, 9, 10], "chain": 1, "util": [1, 8, 12, 17], "our": [1, 14, 16, 19, 22], "new": [1, 3, 4, 5, 6], "abi": 1, "ll": 1, "fork": 1, "yourself": 1, "howev": [1, 6, 14, 16], "make": [1, 18, 21, 22], "customiz": 1, "so": [1, 14, 22], "monitor": 1, "favorit": 1, "abiload": 1, "platform": 1, "univ3": 1, "jsoncontract": 1, "uniswapv3pool": 1, "connect": [1, 22], "connectw3": 1, "net": [1, 8], "polygon": 1, "revent": 1, "retrieveev": 1, "last_block": 1, "latest_block": 1, "start_block": 1, "15": [1, 7, 8, 9, 10, 11, 12, 16, 17, 18, 21], "dict_ev": 1, "eventtyp": 1, "end_block": 1, "contract": [1, 7, 22], "type": [1, 5, 6], "uniswap_v3": 1, "pool_address": 1, "0xb6e57ed85c4c9dbfef2a68711e9d6f36c56e0fcb": 1, "tx_hash": 1, "0xe499971b5410e766d00bf4467c6b333cda04577f1068bb676debe72331254365": 1, "blk_num": 1, "61391083": 1, "timestamp": 1, "1725401207": 1, "detail": 1, "web3_typ": 1, "web3": 1, "_util": 1, "datatyp": 1, "owner": [1, 6], "0xc36442b4a4522e871399cd717abdd847ab11fe88": 1, "tick_low": 1, "286090": 1, "tick_upp": 1, "284860": 1, "liquidity_amount": 1, "884887839988325": 1, "39958320744269616249": 1, "17912626": 1, "0x960fdfe0de1079459493a7e3aa857f8ce0b34016": 1, "0x29d53602b1bbd67734c2e3deba8ad0a55aa84204a6244e720f24ee5160505213": 1, "61391092": 1, "1725401227": 1, "22600": 1, "40000": 1, "7675592444129481120": 1, "64052149877205455": 1, "29656680135133456015": 1, "These": [1, 16], "doc": [1, 2], "intend": 1, "anyon": 1, "who": [1, 22], "build": 1, "whether": [1, 3, 4, 6, 22], "re": [1, 7, 9, 10, 11, 15, 19], "aggreg": 1, "yield": 1, "trader": 1, "provid": [1, 5, 22], "founder": 1, "web": 1, "dev": [1, 2, 7], "arbitrageur": 1, "amm": 1, "mathematician": 1, "curiou": 1, "individu": 1, "place": 1, "check": [1, 3, 4, 6, 13, 19], "usag": 1, "section": 1, "further": 1, "inform": 1, "how": [1, 3, 4, 6, 8, 12, 14, 16, 17], "instal": 1, "project": 1, "under": [1, 16], "activ": 1, "develop": [1, 22], "gmpy2": 2, "python": [2, 7, 8, 22], "precis": [2, 13], "within": [2, 3, 4, 6], "stableswap": 2, "requir": [2, 19], "cpython": 2, "3": [2, 7, 8, 9, 10, 11, 12, 13, 14, 16, 17, 19, 21], "7": [2, 7, 8, 9, 10, 11, 12, 16, 17, 21], "latest": 2, "releas": 2, "pip": 2, "mani": [2, 16], "case": [2, 6], "need": [2, 6, 16], "librari": 2, "gmp": 2, "mpfr": 2, "mpc": 2, "alreadi": 2, "system": [2, 14, 16, 19], "info": 2, "defipi": [2, 7, 8, 11, 15, 21, 22], "git": 2, "clone": 2, "http": 2, "github": [2, 4], "com": 2, "cd": 2, "path": 2, "directori": 2, "manual_balanc": 3, "balancerexchang": [3, 7], "factory_struct": [3, 4, 5, 6], "factorydata": [3, 4, 5, 6], "exchg_struct": [3, 4, 5, 6], "autom": [3, 4], "market": [3, 4, 8, 9, 10], "maker": [3, 4], "self": [3, 4], "burn": [3, 4, 5, 6, 10], "amt_tkn_out": [3, 4, 7], "tkn_out": [3, 4, 7, 11], "_from": [3, 4, 5, 6], "number": 3, "request": [3, 4, 19], "exit_pool": 3, "amt_shares_out": [3, 7], "withdraw": [3, 6, 13, 18, 21, 22], "exit": 3, "exit_swap_extern_amount_out": [3, 7], "exit_swap_pool_amount_in": [3, 7], "get_amount_in": [3, 7], "tkn_in": [3, 4, 7, 11], "some": [3, 4, 14], "equival": [3, 4, 5], "get_amount_out": [3, 4, 5, 7], "amt_tkn_in": [3, 4, 7, 11], "base_tkn": [3, 4], "opp_tkn": [3, 4], "select": [3, 4, 5, 6, 7], "denomin": [3, 4, 6], "amt_shares_in": [3, 4, 7], "tkn_grvaultoup": 3, "balancererc20group": 3, "group": [3, 4, 11], "join_swap_extern_amount_in": [3, 7], "come": [3, 4, 10, 18, 21, 22], "join_swap_pool_amount_out": [3, 7], "new_shar": [3, 4], "updat": [3, 4, 5], "summar": 3, "current": [3, 4, 6, 8], "state": [3, 4, 10], "swap": [3, 4, 5, 6, 8, 9, 10, 13, 14, 15, 20, 22], "amt_swap": 3, "amt_fe": 3, "swape": [3, 4], "swap_exact_amount_in": [3, 7], "swap_exact_amount_out": [3, 7], "newli": [3, 4, 5, 6, 10], "get_exchang": [3, 4, 5, 6], "map": [3, 4, 5, 6, 7], "get_token": [3, 4, 5, 6, 11], "manag": [3, 4], "list": [3, 4], "tkn_dic": [3, 4], "referenc": [3, 4], "tkn_denorm_wt": 3, "denorm": [3, 7], "tkn_bound": 3, "indic": [3, 4, 6], "bound": 3, "bool": [3, 6], "check_tkn": [3, 4], "contain": [3, 4], "get_bal": [3, 4], "referen": [3, 4], "tkn_balanc": [3, 4, 11], "dict": [3, 4], "get_bound": 3, "norm_wts_dict": [3, 4], "get_denorm_weight": 3, "get_norm_weight": 3, "get_dict": [3, 4], "tkn_dict": [3, 4], "get_nam": [3, 4], "tkn_nm": [3, 4, 9, 10, 11, 15], "delimit": [3, 4], "hyphen": [3, 4], "string": [3, 4], "normal": [3, 7], "tkn_name": [3, 4], "retriev": [3, 4, 18, 21], "cwpquot": 3, "get_amount_from_shar": 3, "amount_shares_in": 3, "uniswap": [3, 4, 22], "cwpt": [3, 4, 7], "get_shares_from_amount": 3, "lp_amt": [3, 4], "erc": [3, 4, 5, 6], "addr": [3, 4, 5, 6], "token_nam": [3, 4, 5, 6, 7, 11, 14, 15, 16, 18, 19, 21], "token_addr": [3, 4, 5, 6], "token_tot": [3, 4, 5, 6, 11], "valu": [3, 4, 5, 6, 8, 11, 14], "delta": [3, 4, 5, 6, 8, 9, 10, 14, 16, 19], "total": [3, 4, 5, 6, 14, 16, 19], "transfer": [3, 4, 5, 6], "_to": [3, 4, 5, 6], "manual_stableswap": 4, "stableswapexchang": 4, "tkn_amt_in": 4, "liquidity_out": 4, "tkn_out_amt": [4, 7, 11], "get_math_pool": [4, 11], "underli": 4, "stableswappoolmath": 4, "math_pool": [4, 11], "math": [4, 7, 14, 16, 19], "curveresearch": 4, "repo": [4, 7], "stableswaperc20group": 4, "new_liquid": 4, "remove_liquid": [4, 5, 11], "liquidity_amt_out": 4, "use_fe": 4, "print": [4, 5, 6, 7, 9, 10, 11, 12, 14, 15, 16, 17, 18, 19, 21], "amt2dec": 4, "tkn_amt": [4, 9, 10], "decim": [4, 5, 6, 11], "convert": 4, "balanc": [4, 6, 9, 10, 15], "get_decimal_amt": [4, 11], "format": [4, 16, 19, 22], "decimal_amt": 4, "get_decim": 4, "get_rat": 4, "rate": [4, 19], "tkn_rate": 4, "csquot": 4, "option": [4, 5, 6, 22], "reset": [4, 5, 6], "exchange_from_token": [5, 6], "tokens_from_exchang": [5, 6], "exchg": [5, 6], "factoryinit": [5, 6], "uniswapexchangeinit": [5, 6], "_from_addr": 5, "amountadesir": 5, "amountbdesir": 5, "amountamin": 5, "amountbmin": 5, "desir": [5, 18, 21, 22], "A": [5, 10, 16, 19, 22], "b": [5, 8, 9, 10, 12, 14, 16, 17, 18, 19, 21, 22], "minimum": [5, 6], "to_addr": 5, "amounta": 5, "amountb": 5, "est": 5, "reserve0": [5, 9, 14, 16, 19], "reserve1": [5, 9, 14, 16, 19], "maximum": 5, "get_amount_out0": 5, "get_amount_out1": 5, "portion": [5, 10, 16, 19, 22], "get_fe": [5, 9, 10], "last": 5, "get_last_liquidity_deposit": 5, "went": 5, "get_liquidity_from_provid": [5, 9, 10], "provider_account": 5, "_amounta": 5, "_amountb": 5, "each": 5, "quot": [5, 13, 14, 16, 18, 21, 22], "reservea": 5, "reserveb": 5, "amounta_out": 5, "amountb_out": 5, "swap_exact_tokens_for_token": 5, "amountin": 5, "amountoutmin": 5, "amt": [5, 11, 16, 19], "min": 5, "expect": [5, 9, 10, 16, 18, 21], "update_reserv": 5, "amounta_upd": 5, "amountb_upd": 5, "either": [5, 6, 18, 21, 22], "acccount": 5, "holder": [5, 22], "lperc20": [5, 6], "daosi": [5, 6], "add_token_lp": [5, 6], "remove_token_lp": [5, 6], "set_token_lp": [5, 6], "uniswapv3exchang": 6, "recipi": 6, "ticklow": 6, "tickupp": 6, "sender": 6, "ow": 6, "trigger": 6, "recalcul": 6, "collect": [6, 9, 10], "separ": 6, "much": [6, 14], "token0": [6, 16], "exact": [6, 18, 21, 22], "when": [6, 16, 19], "neg": 6, "token1": [6, 14, 16, 19], "checktick": 6, "common": 6, "valid": [6, 14], "amount0request": 6, "amount1request": 6, "doe": [6, 11], "recomput": 6, "earn": 6, "done": [6, 22], "ani": [6, 22], "mai": 6, "zero": [6, 12, 17], "caller": 6, "pass": [6, 10, 11], "greater": 6, "actual": 6, "e": 6, "g": [6, 9, 10], "uint128": 6, "max": 6, "accumul": 6, "should": [6, 16], "wa": [6, 7, 11], "paid": 6, "get_virtual_reserv": 6, "virtual": 6, "sqrtpricex96": 6, "sqrt": [6, 14, 16, 19, 22], "q64": [6, 22], "96": [6, 8, 22], "The": [6, 7, 14, 15, 16, 18, 19, 21, 22], "final": [6, 13], "automat": 6, "swapper": 6, "due": 6, "depend": 6, "nexttick": 6, "lte": 6, "It": 6, "assum": [6, 9, 10, 14], "kei": 6, "min_tick": 6, "max_tick": 6, "alwai": 6, "don": 6, "t": [6, 9, 10], "run": [6, 12, 16, 17, 19], "risk": 6, "overshoot": 6, "ticknext": 6, "boundari": 6, "long": 6, "been": [6, 19], "right": [6, 14, 16, 19, 22], "Then": 6, "init": 6, "start": [6, 12, 14, 17], "search": 6, "less": 6, "equal": [6, 16], "function": [6, 17], "setfeeprotocol": 6, "feeprotocol0": 6, "feeprotocol1": 6, "s": [6, 14, 16, 19], "zeroforon": 6, "amountspecifi": 6, "sqrtpricelimitx96": 6, "end": [6, 16, 19], "direct": [6, 9, 10], "implicitli": 6, "configur": 6, "limit": [6, 22], "If": 6, "cannot": 6, "after": [6, 9, 10, 15, 16, 18, 21], "swap0forexact1": 6, "sqrtpricelimit": 6, "swapexact0for1": 6, "highest": 6, "directli": 6, "swap1forexact0": 6, "swapexact1for0": 6, "broadli": 7, "consist": [7, 22], "main": [7, 22], "compon": 7, "balancermath": 7, "py": 7, "refactor": [7, 22], "v1": 7, "solid": [7, 15, 22], "code": 7, "copi": [7, 22], "balancerpools_model": 7, "gh": 7, "bmath": 7, "calcspotpric": 7, "calc_spot_pric": 7, "calcoutgivenin": 7, "calc_out_given_in": 7, "calcingivenout": 7, "calc_in_given_out": 7, "calcpooloutgivensinglein": 7, "calc_pool_out_given_single_in": 7, "calcsingleingivenpoolout": 7, "calc_single_in_given_pool_out": 7, "calcpoolingivensingleout": 7, "calc_pool_in_given_single_out": 7, "calcsingleoutgivenpoolin": 7, "calc_single_out_given_pool_in": 7, "os": [7, 9, 10, 16, 17, 19], "json": [7, 11], "numpi": [7, 9, 10, 11, 12, 16, 17, 19], "np": [7, 8, 9, 10, 11, 12, 16, 17, 19], "test": [7, 15], "extract": 7, "cwd": [7, 9], "getcwd": [7, 9], "replac": [7, 9], "notebook": [7, 9], "chdir": [7, 9], "actions_json": 7, "resourc": [7, 22], "0x8b6e6e7b5b3801fed2cafd4b22b8a16c2f2db21a": 7, "action": [7, 22], "open": 7, "r": [7, 8, 9, 10], "f": [7, 8, 9, 10, 11, 12, 14, 15, 17, 18, 21], "pool_act": 7, "load": 7, "loos": 7, "target": 7, "percentag": 7, "deploy": 7, "sum": 7, "typic": 7, "4": [7, 8, 10, 11, 12, 14, 16, 17, 19, 21], "5": [7, 8, 9, 10, 11, 12, 16, 17, 18, 19, 21], "p": [7, 8], "591": 7, "984912776992": 7, "11861": 7, "328308361": 7, "20": [7, 9, 10, 11, 12, 17, 18, 19, 21], "021734704865246": 7, "10011861": 7, "32830836": 7, "67718": 7, "61443839753": 7, "9": [7, 8, 9, 10, 11, 12, 17, 18, 21], "tkn_in_amt": 7, "11878": 7, "911104285744": 7, "9999982": 7, "417204075": 7, "11": [7, 9, 10, 11, 12, 17, 18, 21], "336": 7, "result": 7, "anaddit": 7, "shares_in_amt": 7, "26": [7, 11, 18], "741601415598677": 7, "03156505964916199": 7, "12": [7, 8, 9, 10, 11, 12, 16, 17, 18, 21], "67765": 7, "377774518": 7, "03156505964917": 7, "13": [7, 8, 9, 10, 11, 12, 16, 17, 18, 21], "were": 7, "addit": [7, 22], "8575": 7, "568763821291": 7, "14": [7, 8, 9, 10, 11, 12, 17, 18, 21], "76340": 7, "94653833928": 7, "110": 7, "664": 7, "shares_out_amt": 7, "27": [7, 18], "036668416618735": 7, "031191445644352424": 7, "16": [7, 9, 11, 12, 16, 17, 18, 21], "76313": 7, "90986992266": 7, "00037361400481": 7, "17": [7, 9, 11, 12, 16, 17, 18, 21], "8566": 7, "8415530723": 7, "67747": 7, "06831685036": 7, "here": 8, "articl": [8, 9, 10, 12, 17], "panda": [8, 9, 10, 12, 17], "pd": [8, 9, 10, 12, 17], "seaborn": [8, 9, 10], "sn": [8, 9, 10], "matplotlib": [8, 9, 10, 12, 17], "pyplot": [8, 9, 10, 12, 17], "plt": [8, 9, 10, 12, 17], "mockaddress": 8, "tkn_amount": [8, 9, 10, 15, 18, 19, 21], "1000": [8, 9, 10, 14, 15, 16, 18, 19, 21], "geometr": 8, "brownian": 8, "motion": 8, "n_step": [8, 12, 17], "start_pric": [8, 12, 17], "mu": [8, 12, 17], "sigma": [8, 12, 17], "n_path": [8, 12, 17], "brownianmodel": [8, 12, 17], "p_arr": [8, 9, 10, 12, 17], "gen_gbm": [8, 12, 17], "exp_p_arr": [8, 12, 17], "median": [8, 12, 17], "axi": [8, 12, 17], "50": [8, 10, 16, 18, 19, 21, 22], "univ3help": [8, 15, 19], "get_price_tick": 8, "join": [8, 9, 10, 13, 15, 20, 22], "real": [8, 21], "70469739529014": 8, "gross": [8, 21], "6440": 8, "3320664241655": 8, "arb": [8, 9, 10], "correctreserv": [8, 9, 10], "x0": [8, 9, 10], "p_interv": 8, "500": 8, "800": 8, "1200": 8, "1500": 8, "1700": 8, "lp_price": 8, "lp_liquid": 8, "total_suppli": [8, 11, 14, 19], "lp_swap": 8, "lp_net_deposit": 8, "rang": [8, 9, 10, 12, 17], "select_tkn": 8, "bi_select": 8, "rnd_add_amt": 8, "25": [8, 11, 12, 17, 18], "rnd_swap_amt": 8, "user_add": 8, "random": [8, 9, 10], "choic": 8, "user_swap": 8, "els": [8, 11, 14, 16, 19], "append": [8, 9, 10], "614127": 8, "7691542099": 8, "17821512": 8, "609132715": 8, "35165267": 8, "83386152": 8, "df_liq": 8, "datafram": 8, "column": 8, "po": 8, "enumer": [8, 11], "tick_to_pric": 8, "liq": 8, "liquiditygross": 8, "loc": [8, 12, 17], "center_po": 8, "price_to_tick": 8, "sort_valu": 8, "inplac": 8, "reset_index": 8, "drop": 8, "side_arr": 8, "ask": 8, "elif": [8, 10], "bid": 8, "center": 8, "idx": 8, "17940": 8, "012919": 8, "50341": 8, "631295": 8, "18120": 8, "122126": 8, "22053": 8, "081205": 8, "18180": 8, "158967": 8, "16493": 8, "867865": 8, "18300": 8, "233316": 8, "154124": 8, "547473": 8, "18420": 8, "308563": 8, "1242": 8, "862215": 8, "192": 8, "29640": 8, "19": [8, 9, 11, 12, 14, 15, 16, 17, 18, 19, 21], "372447": 8, "1834": 8, "850559": 8, "193": 8, "29700": 8, "489025": 8, "454": 8, "070649": 8, "194": 8, "29820": 8, "724291": 8, "106": 8, "278197": 8, "195": 8, "29940": 8, "962396": 8, "205": 8, "903139": 8, "196": 8, "30480": 8, "21": [8, 11, 12, 17, 18, 19], "069945": 8, "774698": 8, "row": 8, "fig": [8, 9, 10, 12, 17], "figur": [8, 9, 10, 12, 17], "figsiz": [8, 9, 10, 12, 17], "current_pric": 8, "book_ax": 8, "price_ax": 8, "liq_ax": 8, "subplot": [8, 9, 10, 12, 17], "nrow": [8, 9, 10, 12, 17], "sharex": [8, 9, 10, 12, 17], "sharei": [8, 9, 10, 12, 17], "bar": 8, "color": [8, 9, 10, 12, 16, 17, 19], "steelblu": 8, "width": [8, 14], "0005": [8, 9, 10], "label": [8, 9, 10, 12, 17], "alpha": [8, 9, 10, 16, 19], "axvlin": 8, "mediumvioletr": 8, "linewidth": [8, 9, 10, 12, 17], "linestyl": [8, 9, 10, 12, 17], "dashdot": [8, 9, 10], "set_xlabel": [8, 9, 10], "usd": [8, 9, 10, 12, 17], "size": [8, 9, 10, 14], "set_ylabel": [8, 9, 10, 12, 17], "set_titl": [8, 9, 10, 12, 17], "distribut": [8, 9, 10, 13, 16, 22], "legend": [8, 9, 10, 12, 17], "x_val": [8, 9, 10], "arang": [8, 9, 10], "len": [8, 9, 10], "dash": [8, 9, 10, 12, 17], "time": [8, 10], "sampl": [8, 12, 17], "tight_layout": 8, "lt": [8, 9, 10, 12, 17], "1000x500": 8, "ax": [8, 9, 10, 12, 17], "gt": [8, 9, 10, 12, 17], "distplot": [8, 9, 10], "hist": [8, 9, 10], "kde": [8, 9, 10], "bin": [8, 9, 10], "30": [8, 9, 10, 14, 15, 18], "darkblu": [8, 9, 10], "hist_kw": [8, 9, 10], "edgecolor": [8, 9, 10], "black": [8, 9, 10], "kde_kw": [8, 9, 10], "histogram": 8, "volum": [8, 9], "frequenc": [8, 9, 10], "text": [8, 9, 10, 12, 17], "39": [8, 9, 10, 12, 14, 15, 17, 18], "scatterplot": 8, "hue": 8, "palett": [8, 12, 17], "green": 8, "red": [8, 16], "fontsiz": [8, 9, 10, 12, 17], "depth": 8, "chart": [8, 9, 10], "ecdfplot": 8, "stat": [8, 9, 10], "count": 8, "complementari": 8, "queri": 8, "assumpt": [9, 10], "stablecoin": [9, 10], "control": [9, 10], "imperman": [9, 10], "loss": [9, 10], "infinit": 9, "suppli": [9, 10, 14, 19], "iusdc": [9, 10, 15], "perform": [9, 10, 16, 18, 21, 22], "datetim": [9, 10, 12, 17], "scipi": [9, 10], "statsmodel": [9, 10], "sm": [9, 10], "medium_articl": 9, "init_tkn_lp": [9, 10], "100000": [9, 10, 15, 18, 19, 21], "tkn_delta_param": [9, 10], "tkn_invest_amt": [9, 10], "itkn_nm": [9, 10, 15], "usdt_nm": [9, 15], "iusdt_nm": [9, 15], "iusdt": [9, 10, 15], "n_sim_run": [9, 10], "seconds_year": [9, 10], "31536000": [9, 10], "shape": [9, 10], "scale": [9, 10], "gamma": [9, 10, 14, 19], "n_run": [9, 10], "dt": [9, 10], "timedelta": [9, 10, 12, 17], "second": [9, 10], "date": [9, 10], "strptime": [9, 10], "2024": [9, 10], "09": [9, 10, 19], "01": [9, 10, 14, 15, 18, 21], "m": [9, 10], "d": [9, 10], "usd_ax": [9, 10, 12, 17], "plot": [9, 10, 12, 17], "usdt_amount": [9, 15], "usdt1": [9, 15], "ivault1": [9, 10, 15], "indexvault": [9, 10, 15], "0x7": [9, 10, 15], "tkn2": [9, 10, 15, 18], "itkn1": [9, 10, 15], "indexerc20": [9, 10, 15], "exchg_data1": [9, 10, 15], "lp1": [9, 10, 15], "0x012": [9, 10, 15, 18], "jointre": [9, 10, 15], "10000": [9, 10, 11, 12, 15, 17, 18, 21], "110000": [9, 10, 21], "109983": [9, 10], "31666575832": 9, "9972": [9, 10], "071706380653": 9, "4833": 9, "211949992264": 9, "6942": 9, "415727789479": 9, "tkn_invest": [9, 10], "invested_user_nm": [9, 10], "invested_us": [9, 10], "swapindexmint": [9, 10], "mint_itkn1_deposit": [9, 10], "convert_to_human": [9, 10], "index_token": [9, 10], "last_lp_deposit": [9, 10], "lp_invest_track": [9, 10], "lp1_invest_track": [9, 10], "redeem": [9, 10], "tkn_redeem_par": [9, 10], "itkn_redeem_child": [9, 10], "tkn_redeem_tre": [9, 10], "3f": [9, 10], "1f": [9, 10], "immedi": [9, 10], "110100": [9, 10], "110033": [9, 10], "22264148264": 9, "4883": 9, "117925716595": 9, "6978": 9, "1123931422935": 9, "99": [9, 10, 16, 18, 21], "700": [9, 10], "49": [9, 10], "906": [9, 10], "403": [9, 10], "35": [9, 10, 14, 15, 18], "697": 9, "arb1": [9, 10], "lp_direct_invest_arr": [9, 10], "lp1_direct_invest_arr": [9, 10], "lp1_tree_invest_arr": [9, 10], "ptkn_usdt_arr": 9, "ptkn_itkn_arr": [9, 10], "fee_lp_arr": [9, 10], "fee_lp1_arr": [9, 10], "arbitrag": [9, 10], "p_lp1": 9, "conserv": [9, 10], "captur": [9, 10], "treeamountquot": [9, 10], "get_tot_i": [9, 10], "147284": 9, "7509076092": 9, "142910": 9, "2586404444": 9, "136970": 9, "6876694417": 9, "12290": 9, "555766155601": 9, "5486": 9, "217037846741": 9, "7507": 9, "116283763606": 9, "107": 9, "147": 9, "111": 9, "584": 9, "tkn_ax": [9, 10], "usdt_ax": 9, "strt_pt": [9, 10], "comparison": [9, 10], "grid": [9, 10], "lowess": [9, 10], "nonparametr": [9, 10], "frac": [9, 10, 14, 16, 19], "sm_lp_direct": [9, 10], "sm_lp1_direct": [9, 10], "sm_lp1_tree": [9, 10], "strt_ind": [9, 10], "p_ax": [9, 10, 12, 17], "suptitl": [9, 10], "set_ylim": 9, "80": 9, "140": 9, "befor": [9, 10], "worth": [9, 10, 14, 15, 18, 21], "000": [9, 10], "105": [9, 10], "524": 9, "111582716410069549056": 9, "114": 9, "471": 9, "fee_lpb": [9, 10], "arrai": [9, 10, 12, 17], "fee_lpa": [9, 10], "fill_between": [9, 10], "repeat": [9, 10], "titl": [9, 10], "cumul": [9, 10], "ylabel": [9, 10], "0x1666d0040": 9, "machin": [10, 13, 22], "finit": 10, "usd_nm": 10, "iusd_nm": 10, "dai1": 10, "tkn_amt_arb": 10, "lp1_state": 10, "markovst": 10, "stochast": 10, "64230441394": 10, "071706380651": 10, "4843": 10, "286073492405": 10, "6949": 10, "647186683727": 10, "next_stat": 10, "5484278999": 10, "4893": 10, "1921969783725": 10, "6985": 10, "30700316561": 10, "660": 10, "ptkn_dai_arr": 10, "amt_arb1": 10, "update_st": 10, "mint_tkn1_amt": 10, "vault_lp1_amt": 10, "get_current_st": 10, "dvault": 10, "burned_itkn1_amt": 10, "dburn": 10, "total_tkn_w_swap": 10, "itkn": 10, "aquir": [10, 22], "while": 10, "remaind": 10, "held": 10, "amt_tkn": [10, 18, 21], "price_tkn": 10, "ab": 10, "outsid": 10, "held_token": 10, "tradable_itkn1_amt": 10, "172270": 10, "47986192277": 10, "169688": 10, "0597961738": 10, "162921": 10, "9244399491": 10, "27958": 10, "351361224384": 10, "13816": 10, "083802580026": 10, "16591": 10, "87575875552": 10, "365": [10, 12, 17], "125": 10, "058": 10, "check_stat": 10, "inspect_st": 10, "tail": 10, "num_stat": 10, "retain": 10, "across": 10, "dheld": 10, "1996": 10, "462873": 10, "4498": 10, "676195": 10, "16526": 10, "816957": 10, "74539": 10, "337534": 10, "1058": 10, "336332": 10, "1078": 10, "992156": 10, "057808": 10, "1997": [10, 16], "91": 10, "074019": 10, "4844": 10, "185571": 10, "16148": 10, "921866": 10, "74590": 10, "186122": 10, "345": 10, "509377": 10, "377": 10, "895092": 10, "848588": 10, "1998": 10, "415598": 10, "4362": 10, "801913": 10, "16671": 10, "573778": 10, "74639": 10, "991887": 10, "481": 10, "383659": 10, "522": 10, "651913": 10, "805765": 10, "1999": 10, "026816": 10, "5818": 10, "449418": 10, "15149": 10, "357511": 10, "74713": 10, "976247": 10, "1455": 10, "647506": 10, "1522": 10, "216268": 10, "73": 10, "984360": 10, "262046": 10, "5238": 10, "183496": 10, "15686": 10, "906375": 10, "74786": 10, "720122": 10, "580": 10, "265923": 10, "537": 10, "548864": 10, "72": 10, "743875": 10, "dai_ax": [10, 12, 17], "y1_samp": 10, "rv": 10, "104": 10, "119": 10, "797": 10, "124": 10, "390": 10, "xlabel": 10, "unit": 10, "0x28b82fe50": 10, "0xa0b": 11, "0xf93": 11, "0xd7c": 11, "p_usdc_dai": 11, "p_dai_usdc": 11, "9999896456022903": 11, "0000103545049244": 11, "usdc_befor": 11, "usdt_befor": 11, "9996": 11, "862748": 11, "leak": 11, "usdc_check": 11, "usdt_check": 11, "usdc_test": 11, "fail": 11, "usdt_test": 11, "81355068": 11, "55653253": 11, "910191": 11, "dai_befor": 11, "9998": 11, "895308918858": 11, "dai_check": 11, "dai_test": 11, "79556308": 11, "6645169": 11, "81365068": 11, "liquidity_amt_in": 11, "919116999057": 11, "55663253": 11, "216583028": 11, "83723688": 11, "968444705135": 11, "79566308": 11, "216593027": 11, "8056816": 11, "amt_lp_out": 11, "250000": 11, "lp_amt_befor": 11, "250001": 11, "94300082736": 11, "lp_amt_check": 11, "lp_amt_test": 11, "79316306": 11, "72151607": 11, "216343027": 11, "500000": 11, "500009": 11, "469211": 11, "80865058": 11, "718728": 11, "215843027": 11, "499898": 11, "496234": 11, "55163355": 11, "413957": 11, "215343027": 11, "22": [11, 12, 17, 18, 19], "tkn_decimal_amt": 11, "23": [11, 12, 14, 17, 18, 19], "lp_test": 11, "round": 11, "24": [11, 12, 17, 18, 19], "tkn_reserv": 11, "tkn_math_pool_bal": 11, "token_decim": 11, "assert": 11, "error": 11, "NOT": [11, 22], "match": 11, "WITH": [11, 22], "decentr": [12, 17], "financ": [12, 17], "pymc": [12, 17], "5000": [12, 17], "t_delta": [12, 17], "linspac": [12, 17], "num": [12, 17], "2023": [12, 17], "date_tim": [12, 17], "gca": [12, 17], "gp": [12, 17], "plot_gp_dist": [12, 17], "transpos": [12, 17], "cool": [12, 17], "plot_sampl": [12, 17], "white": [12, 17], "sysusd": [12, 17], "gbm": [12, 17], "sy": [12, 17], "facecolor": [12, 17], "lightgrai": [12, 17], "0x280a50790": 12, "sys_arr": [12, 17], "float64": [12, 17], "x_amt_arr": [12, 17], "y_amt_arr": [12, 17], "trial": [12, 17], "p_trial_arr": [12, 17], "lp_sim": [12, 17], "simplelpsimul": [12, 17], "init_amt": [12, 17], "create_lp": [12, 17], "get_tkn_price_sim": [12, 17], "get_x_amt_sim": [12, 17], "get_y_amt_sim": [12, 17], "sys_ax": [12, 17], "mean": [12, 17], "w": [12, 17], "problem": 13, "solv": [13, 14], "step": 13, "solut": [13, 14, 16], "naiv": 13, "approach": 13, "classic": 13, "tree": 13, "config": 13, "29": [14, 15, 18], "ipython": 14, "displai": 14, "imag": 14, "1000000": [14, 16], "dl": [14, 19], "want": [14, 22], "know": 14, "home": 14, "let": [14, 16, 19], "l": [14, 19], "dx": [14, 16, 19], "2l": 14, "substitut": 14, "2x": 14, "nbsphinx": 14, "sim": 14, "likewis": 14, "logic": 14, "work": [14, 22], "ok": 14, "small": 14, "lp_posit": 14, "naive_approxim": 14, "5f": 14, "napproach": 14, "316": 14, "22777": 14, "00000": 14, "larg": 14, "31": [14, 15, 18], "77660": 14, "complet": 14, "off": 14, "32": [14, 15, 18], "indexed_tkn": 14, "png": 14, "300": 14, "height": 14, "definit": [14, 19], "where": [14, 16, 19], "r0": [14, 19], "r1": [14, 19], "a0": [14, 19], "a1": [14, 19], "997": [14, 16, 19], "linear": [14, 19], "equat": [14, 16, 19], "eq": [14, 16, 19], "y_": [14, 19], "i": [14, 19], "33": [14, 15, 18], "def": [14, 16, 19], "calc_tkn_settl": 14, "dy1": 14, "dy2": 14, "34": [14, 15, 18], "delta_l": 14, "delta_eth": 14, "delta_dai": 14, "06315": 14, "63": 14, "15068": 14, "settlement_lp_tkn": 14, "now": [14, 16, 19], "outlin": [14, 19], "rearrang": [14, 19], "plug": [14, 16, 19], "reduc": [14, 16, 19], "quadrat": [14, 16, 19], "1000xy": [14, 19], "1000l": [14, 19], "calc_lp_settl": [14, 19], "36": [14, 15, 18], "a2": [14, 19], "c": [14, 16, 17, 18, 19, 21, 22], "37": [14, 15, 18], "38": [14, 15, 18], "14969": 14, "delta_eth_lp": 14, "delta_dai_lp": 14, "mechanisim": 14, "back": 14, "origin": [14, 22], "against": [14, 16], "indexed_approach": 14, "2f": [14, 16], "00": [14, 16], "87": 14, "pretti": 14, "close": 14, "try": 14, "41": 14, "78": 14, "excel": 14, "42": 14, "43": 14, "0158351449592624": 14, "vet": 15, "28": [15, 18], "user_machine_check": 15, "dec2gwei": 15, "type_gwei": 15, "1000000000000000000000": 15, "100000000000000000000000": 15, "10000000000000000000000": 15, "1010000000000000000000": 15, "101000000000000000000000": 15, "10100000000000000000000": 15, "900000000000000000000": 15, "90000000000000000000000": 15, "9000000000000000000000": 15, "990128419656029387011": 15, "989999999999999999241": 15, "9949799447405356572672": 15, "p_eth": [15, 18, 21], "p_dai": 15, "1000000000000000000": 15, "9969900600091018": 15, "99600698103990321650": 15, "199690059907017973": 15, "9969005990701797e": 15, "109999999999999999072351": 15, "109999999999999999072352": 15, "109984620658241662373796": 15, "9972071706380652773376": 15, "4873552747221099553490": 15, "6971328242172880813044": 15, "termcolor": [16, 19], "usdc_amount": 16, "oper": 16, "incom": 16, "fund": 16, "achiev": 16, "ensur": 16, "s_": 16, "begin": [16, 19], "x_": 16, "1000x": 16, "tag": [16, 19], "highlight": 16, "why": 16, "consider": 16, "niniti": [16, 19], "n": [16, 19], "s_in": 16, "s_out": 16, "nlp": [16, 19], "post": [16, 19], "balance0": 16, "balance1": 16, "along": 16, "ntotal": 16, "6f": [16, 19], "unaccount": 16, "consid": 16, "split": [16, 19], "attr": 16, "bold": 16, "1050": [16, 19], "952517": 16, "026241844": 16, "1100": [16, 19, 21], "997874": 16, "9798724081": 16, "33128": 16, "623106525876": 16, "47482": 16, "973758155924": 16, "000000": [16, 19], "997874979872408079134912": 16, "49850": 16, "a1_out": 16, "instead": 16, "85": 16, "imbal": 16, "proper": 16, "correct": [16, 19], "calc_deposit_dist": 16, "calc_deposit_port": 16, "token_from_exchang": 16, "tkn_suppli": 16, "distrbut": 16, "4888217399419355": 16, "382298533595474": 16, "through": [16, 19, 22], "compar": [16, 19], "1048": [16, 19], "8821739941936": 16, "953529": 16, "2490856305": 16, "33163": 16, "92929950274": 16, "48": [16, 19], "88217399419355": 16, "46470": 16, "75091436945": 16, "51": [16, 19], "11782600580645": 16, "882174": 16, "117826": 16, "dep": 16, "warn": 17, "pytensor": 17, "tensor": 17, "bla": 17, "0x1649c3dc0": 17, "doubl": [18, 21, 22], "just": [18, 21, 22], "leav": [18, 21, 22], "expected_amount_out": [18, 21], "999": [18, 19, 21], "9994": [18, 21], "991239989282": [18, 21], "990": [18, 21], "1284196560293": [18, 21], "101000": [18, 21], "1010": [18, 21], "99012": [18, 21], "84196560294": [18, 21], "lp_tkn": 18, "0x112": 18, "lp_tkn_amount": 18, "lp2": 18, "ethtkn": 18, "10100": [18, 21], "9990": 18, "039930189601": 18, "100100": [18, 21], "10001": 18, "100010": 18, "31625": 18, "93887934396": 18, "10010": 18, "31654": 18, "399378285478": 18, "99900": [18, 21], "10004": [18, 21], "991241237401": 18, "1001": 18, "1004": 18, "980069557936": 18, "upon": [18, 21], "994": 18, "9799447405356": 18, "p_tkn": [18, 21], "009969900600091019": 18, "60069810399033": 18, "19969005990701796": 18, "969005990701795": 18, "amt_eth_lp": [18, 21], "amt_tkn_lp": [18, 21], "00876001071831": 18, "05007523748156423": 18, "mth": 19, "user_nm1": 19, "p_out": 19, "removeliq": 19, "Of": 19, "ha": 19, "10488": 19, "088481701516": 19, "95454": 19, "54545454546": 19, "10011": 19, "35718707872": 19, "1002": 19, "4094194662908": 19, "47": 19, "590581": 19, "97": 19, "gwei2dec": 19, "eth_amt": 19, "488": 19, "787567": 19, "587935447692871e": 19, "reconsid": 19, "redefin": 19, "thu": 19, "therefor": 19, "solver": 19, "calc_port": 19, "calc_withdraw_port": 19, "dy": 19, "aswap": 19, "512645": 19, "735527472211": 19, "95339": 19, "59340656463": 19, "9999": 19, "300914574962": 19, "9999999999999": 19, "264473": 19, "735527": 19, "per": 19, "300914574964": 19, "11000": 21, "99000": 21, "9900": 21, "00000001659": 21, "991244978852": 21, "1009": 21, "9999999867499": 21, "10049": 21, "801066245287": 21, "0000000000001": 21, "00000000001": 21, "009969900600093062": 21, "60069810398764": 21, "9969005990709153e": 21, "9905136039497506e": 21, "008760010717809e": 21, "007523748208768e": 21, "wai": 22, "backbon": 22, "variou": 22, "defi": 22, "framework": 22, "analyz": 22, "mock": 22, "ve": 22, "best": 22, "maintain": 22, "offer": 22, "suit": 22, "familiar": 22, "support": 22, "analyst": 22, "streamlin": 22, "analyt": 22, "made": 22, "overiew": 22, "learn": 22, "visit": 22, "refer": 22, "descript": 22, "versa": 22, "enter": 22, "usabl": 22, "present": 22, "human": 22, "form": 22, "unless": 22, "exampl": 22, "gwei": 22, "3000000000000000000000": 22, "3000": 22, "4339505179874779672736325173248": 22, "paramet": 22, "toggl": 22, "pipelin": 22, "backend": 22, "v2": 22, "v3": 22, "permiss": 22, "herebi": 22, "grant": 22, "free": 22, "charg": 22, "person": 22, "obtain": 22, "softwar": 22, "associ": 22, "document": 22, "file": 22, "deal": 22, "without": 22, "restrict": 22, "modifi": 22, "merg": 22, "publish": 22, "sublicens": 22, "permit": 22, "whom": 22, "furnish": 22, "do": 22, "subject": 22, "condit": 22, "copyright": 22, "notic": 22, "shall": 22, "substanti": 22, "THE": 22, "IS": 22, "AS": 22, "warranti": 22, "OF": 22, "kind": 22, "express": 22, "OR": 22, "impli": 22, "BUT": 22, "TO": 22, "merchant": 22, "fit": 22, "FOR": 22, "particular": 22, "purpos": 22, "AND": 22, "noninfring": 22, "IN": 22, "NO": 22, "author": 22, "BE": 22, "liabl": 22, "claim": 22, "damag": 22, "liabil": 22, "tort": 22, "aris": 22}, "objects": {"balancerpy": [[3, 0, 0, "-", "erc"], [3, 0, 0, "-", "vault"]], "balancerpy.erc": [[3, 1, 1, "", "ERC20"]], "balancerpy.erc.ERC20": [[3, 2, 1, "", "deposit"], [3, 2, 1, "", "transfer"]], "balancerpy.vault": [[3, 1, 1, "", "BalancerVault"]], "balancerpy.vault.BalancerVault": [[3, 2, 1, "", "add_token"], [3, 2, 1, "", "check_tkn"], [3, 2, 1, "", "get_balances"], [3, 2, 1, "", "get_bounds"], [3, 2, 1, "", "get_denorm_weights"], [3, 2, 1, "", "get_dict"], [3, 2, 1, "", "get_name"], [3, 2, 1, "", "get_names"], [3, 2, 1, "", "get_norm_weights"], [3, 2, 1, "", "get_token"], [3, 2, 1, "", "get_tokens"]], "": [[3, 0, 0, "module-0", "manual_balancer"], [4, 0, 0, "module-0", "manual_stableswap"]], "manual_balancer": [[3, 1, 1, "", "BalancerExchange"], [3, 1, 1, "", "BalancerFactory"], [3, 1, 1, "", "CWPQuote"]], "manual_balancer.BalancerExchange": [[3, 2, 1, "", "burn"], [3, 2, 1, "", "exit_pool"], [3, 2, 1, "", "exit_swap_extern_amount_out"], [3, 2, 1, "", "exit_swap_pool_amount_in"], [3, 2, 1, "", "get_amount_in"], [3, 2, 1, "", "get_amount_out"], [3, 2, 1, "", "get_price"], [3, 2, 1, "", "get_reserve"], [3, 2, 1, "", "join_pool"], [3, 2, 1, "", "join_swap_extern_amount_in"], [3, 2, 1, "", "join_swap_pool_amount_out"], [3, 2, 1, "", "mint"], [3, 2, 1, "", "summary"], [3, 2, 1, "", "swap"], [3, 2, 1, "", "swap_exact_amount_in"], [3, 2, 1, "", "swap_exact_amount_out"]], "manual_balancer.BalancerFactory": [[3, 2, 1, "", "deploy"], [3, 2, 1, "", "get_exchange"], [3, 2, 1, "", "get_token"]], "manual_balancer.CWPQuote": [[3, 2, 1, "", "get_amount_from_shares"], [3, 2, 1, "", "get_shares_from_amount"]], "manual_stableswap": [[4, 1, 1, "", "CSQuote"], [4, 1, 1, "", "StableswapExchange"], [4, 1, 1, "", "StableswapFactory"]], "manual_stableswap.CSQuote": [[4, 2, 1, "", "get_lp_from_amount"]], "manual_stableswap.StableswapExchange": [[4, 2, 1, "", "add_liquidity"], [4, 2, 1, "", "burn"], [4, 2, 1, "", "get_amount_out"], [4, 2, 1, "", "get_math_pool"], [4, 2, 1, "", "get_price"], [4, 2, 1, "", "get_reserve"], [4, 2, 1, "", "join_pool"], [4, 2, 1, "", "mint"], [4, 2, 1, "", "remove_liquidity"], [4, 2, 1, "", "summary"], [4, 2, 1, "", "swap"]], "manual_stableswap.StableswapFactory": [[4, 2, 1, "", "deploy"], [4, 2, 1, "", "get_exchange"], [4, 2, 1, "", "get_token"]], "stableswappy": [[4, 0, 0, "-", "erc"], [4, 0, 0, "-", "vault"]], "stableswappy.erc": [[4, 1, 1, "", "ERC20"]], "stableswappy.erc.ERC20": [[4, 2, 1, "", "deposit"], [4, 2, 1, "", "transfer"]], "stableswappy.vault": [[4, 1, 1, "", "StableswapVault"]], "stableswappy.vault.StableswapVault": [[4, 2, 1, "", "add_token"], [4, 2, 1, "", "amt2dec"], [4, 2, 1, "", "check_tkn"], [4, 2, 1, "", "get_balances"], [4, 2, 1, "", "get_decimal_amts"], [4, 2, 1, "", "get_decimals"], [4, 2, 1, "", "get_dict"], [4, 2, 1, "", "get_name"], [4, 2, 1, "", "get_names"], [4, 2, 1, "", "get_rates"], [4, 2, 1, "", "get_token"], [4, 2, 1, "", "get_tokens"]], "uniswappy.cpt": [[6, 0, 0, "-", "exchg"], [6, 0, 0, "-", "factory"], [0, 0, 0, "-", "index"], [0, 0, 0, "-", "quote"]], "uniswappy.cpt.exchg": [[5, 1, 1, "", "UniswapExchange"], [6, 1, 1, "", "UniswapV3Exchange"]], "uniswappy.cpt.exchg.UniswapExchange": [[5, 2, 1, "", "add_liquidity"], [5, 2, 1, "", "burn"], [5, 2, 1, "", "get_amount_out"], [5, 2, 1, "", "get_amount_out0"], [5, 2, 1, "", "get_amount_out1"], [5, 2, 1, "", "get_amounts"], [5, 2, 1, "", "get_fee"], [5, 2, 1, "", "get_last_liquidity_deposit"], [5, 2, 1, "", "get_liquidity"], [5, 2, 1, "", "get_liquidity_from_provider"], [5, 2, 1, "", "get_price"], [5, 2, 1, "", "get_reserve"], [5, 2, 1, "", "mint"], [5, 2, 1, "", "quote"], [5, 2, 1, "", "remove_liquidity"], [5, 2, 1, "", "summary"], [5, 2, 1, "", "swap"], [5, 2, 1, "", "swap_exact_tokens_for_tokens"], [5, 2, 1, "", "update_reserves"]], "uniswappy.cpt.exchg.UniswapV3Exchange": [[6, 2, 1, "", "burn"], [6, 2, 1, "", "checkTicks"], [6, 2, 1, "", "collect"], [6, 2, 1, "", "get_liquidity"], [6, 2, 1, "", "get_price"], [6, 2, 1, "", "get_reserve"], [6, 2, 1, "", "get_virtual_reserve"], [6, 2, 1, "", "initialize"], [6, 2, 1, "", "mint"], [6, 2, 1, "", "nextTick"], [6, 2, 1, "", "setFeeProtocol"], [6, 2, 1, "", "summary"], [6, 2, 1, "", "swap"], [6, 2, 1, "", "swap0ForExact1"], [6, 2, 1, "", "swap1ForExact0"], [6, 2, 1, "", "swapExact0For1"], [6, 2, 1, "", "swapExact1For0"]], "uniswappy.cpt.factory": [[6, 1, 1, "", "UniswapFactory"]], "uniswappy.cpt.factory.UniswapFactory": [[6, 2, 1, "", "deploy"], [6, 2, 1, "", "get_exchange"], [6, 2, 1, "", "get_token"]], "uniswappy.cpt.index": [[0, 1, 1, "", "RebaseIndexToken"], [0, 1, 1, "", "SettlementLPToken"]], "uniswappy.cpt.index.RebaseIndexToken": [[0, 2, 1, "", "apply"]], "uniswappy.cpt.index.SettlementLPToken": [[0, 2, 1, "", "apply"]], "uniswappy.cpt.quote": [[0, 1, 1, "", "IndexTokenQuote"], [0, 1, 1, "", "LPQuote"]], "uniswappy.cpt.quote.IndexTokenQuote": [[0, 2, 1, "", "base_x_asset"], [0, 2, 1, "", "base_y_asset"], [0, 2, 1, "", "get_base_lp"], [0, 2, 1, "", "get_native_x"], [0, 2, 1, "", "get_native_y"], [0, 2, 1, "", "get_x"], [0, 2, 1, "", "get_y"]], "uniswappy.cpt.quote.LPQuote": [[0, 2, 1, "", "get_amount"], [0, 2, 1, "", "get_amount_from_lp"], [0, 2, 1, "", "get_liquidity"], [0, 2, 1, "", "get_lp_from_amount"], [0, 2, 1, "", "get_opposing_token"], [0, 2, 1, "", "get_price"], [0, 2, 1, "", "get_reserve"]], "uniswappy": [[6, 0, 0, "-", "erc"]], "uniswappy.erc": [[6, 1, 1, "", "ERC20"], [6, 1, 1, "", "LPERC20"]], "uniswappy.erc.ERC20": [[6, 2, 1, "", "deposit"], [6, 2, 1, "", "transfer"]], "uniswappy.erc.LPERC20": [[6, 2, 1, "", "add_token_lp"], [6, 2, 1, "", "remove_token_lp"], [6, 2, 1, "", "set_token_lp"]], "uniswappy.process": [[0, 0, 0, "-", "deposit"], [0, 0, 0, "-", "join"], [0, 0, 0, "-", "liquidity"], [0, 0, 0, "module-0", "swap"]], "uniswappy.process.deposit": [[0, 1, 1, "", "SwapDeposit"]], "uniswappy.process.deposit.SwapDeposit": [[0, 2, 1, "", "apply"], [0, 2, 1, "", "get_trading_token"]], "uniswappy.process.join": [[0, 1, 1, "", "Join"]], "uniswappy.process.join.Join": [[0, 2, 1, "", "apply"]], "uniswappy.process.liquidity": [[0, 1, 1, "", "AddLiquidity"], [0, 1, 1, "", "RemoveLiquidity"]], "uniswappy.process.liquidity.AddLiquidity": [[0, 2, 1, "", "apply"]], "uniswappy.process.liquidity.RemoveLiquidity": [[0, 2, 1, "", "apply"]], "uniswappy.process.swap": [[0, 1, 1, "", "Swap"], [0, 1, 1, "", "WithdrawSwap"]], "uniswappy.process.swap.Swap": [[0, 2, 1, "", "apply"]], "uniswappy.process.swap.WithdrawSwap": [[0, 2, 1, "", "apply"], [0, 2, 1, "", "get_trading_token"]]}, "objtypes": {"0": "py:module", "1": "py:class", "2": "py:method"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "class", "Python class"], "2": ["py", "method", "Python method"]}, "titleterms": {"uniswap": [0, 1, 5, 6, 8, 12, 13, 14, 17, 20], "v2": [0, 1, 5, 9, 10, 13, 18], "v3": [0, 1, 6, 8, 20, 21], "join": [0, 7, 11, 18, 21], "swap": [0, 7, 11, 16, 18, 19, 21], "withdraw": [0, 19], "deposit": [0, 16], "liquid": [0, 7, 8, 11], "quot": [0, 3, 4, 15], "defipi": 1, "defi": 1, "analyt": 1, "python": 1, "exampl": 1, "balanc": [1, 3, 7, 11], "stableswap": [1, 4, 11], "web3scout": 1, "welcom": 1, "s": 1, "document": 1, "content": 1, "instal": 2, "constant": [3, 5, 6], "weight": 3, "product": [3, 5, 6], "trade": [3, 4, 5, 6, 9, 10], "vault": [3, 4], "token": [3, 4, 5, 6, 7, 11, 19], "compos": 4, "stabl": 4, "benchmark": 7, "paramet": [7, 11], "pool": [7, 8, 11], "price": [7, 8, 9, 10, 11], "out": 7, "given": 7, "add": [7, 11], "amount": 7, "lp": 7, "share": 7, "remov": [7, 11], "order": 8, "book": 8, "simul": [8, 9, 10, 12, 17], "setup": 8, "construct": 8, "review": 8, "output": 8, "plot": 8, "simpl": [9, 10], "uni": [9, 10], "tree": [9, 10, 15], "part": [9, 10], "1": [9, 15], "script": [9, 10], "param": [9, 10], "data": [9, 10], "initi": [9, 10], "dex": [9, 10], "take": [9, 10], "an": [9, 10], "invest": [9, 10], "posit": [9, 10], "2": [10, 15], "all": 11, "asset": 11, "usdc": 11, "dai": 11, "usdt": 11, "check": [11, 14, 15, 16], "exchang": 11, "math": 11, "basic": [12, 17], "index": 14, "problem": [14, 16, 19], "defin": [14, 16, 19], "settlement": 14, "us": 14, "uniswappi": 14, "naiv": 14, "approach": 14, "final": [14, 16, 19], "machin": 15, "precis": [15, 22], "abstract": [15, 18, 21, 22], "interfac": [15, 18, 21, 22], "3": 15, "classic": 15, "config": 15, "solv": [16, 19], "step": [16, 19], "addliquid": [18, 21], "removeliquid": [18, 21], "swapdeposit": [18, 21], "withdrawswap": [18, 19, 21], "lpquot": [18, 21], "distribut": 19, "solut": 19, "usag": 22, "primit": 22, "mit": 22, "licens": 22}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "nbsphinx": 4, "sphinx": 56}})