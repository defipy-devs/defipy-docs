<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pool Events &mdash; DeFiPy  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx-design.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/nbsphinx-code-cells.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9bcbadda"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/design-tabs.js?v=f930bc37"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Solidity Script Interfacing" href="testnet_sim_univ2.html" />
    <link rel="prev" title="Impermanent Loss Agent" href="impermanent_loss.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #673147" >
            <a href="../index.html" class="icon icon-home"> DeFiPy
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quick/index.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../book.html">TextBook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../legal.html">Licensing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DeFi Math</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../math/univ2_math.html">Uniswap V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/univ3_math.html">Uniswap V3</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../uniswapv2/index.html">Uniswap V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../uniswapv3/index.html">Uniswap V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../balancer/index.html">Balancer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stableswap/index.html">Stableswap</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Analytics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/univ2_sim.html">Uniswap V2 Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/order_book.html">Uniswap V3 Order Book</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/imp_loss.html">Impermanent Loss</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/fsm.html">Finite State Machine</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/simple_tree_pt1.html">Simple Uni V2 Tree (Part 1)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/simple_tree_pt2.html">Simple Uni V2 Tree (Part 2)</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Onchain</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="price_threshold_swap.html">Price Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="tvl_based_liquidity.html">Liquidity Exit Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="volume_spike_notifier.html">Volume Spike Agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="impermanent_loss.html">Impermanent Loss Agent</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Pool Events</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Uniswap-V2">Uniswap V2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#üìò-Notable-Classes">üìò Notable Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Extract-Mint-Events">Extract Mint Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Extract-Swap-Events">Extract Swap Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Extract-Burn-Events">Extract Burn Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Extract-Sync-Events-(Price-Oracle)">Extract Sync Events (Price Oracle)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Uniswap-V3">Uniswap V3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Extract Mint Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Extract Swap Events</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Extract Burn Events</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="testnet_sim_univ2.html">Solidity Script Interfacing</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Abstract API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../abstract_uniswap.html">Uniswap V2/V3</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Primitive API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../primitive_uniswapv2.html">Uniswap V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../primitive_uniswapv3.html">Uniswap V3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../primitive_balancer.html">Balancer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../primitive_stableswap.html">StableSwap</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #673147" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DeFiPy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Pool Events</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/onchain/pool_events.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Pool-Events">
<h1>Pool Events<a class="headerlink" href="#Pool-Events" title="Link to this heading">ÔÉÅ</a></h1>
<p>This script shows how to leverage the Web3Scout package to read pool events, effectively serving as an extension of web3.py package. These pool events can serve as data feeds for DeFiPy analytics tooling.</p>
<section id="Uniswap-V2">
<h2>Uniswap V2<a class="headerlink" href="#Uniswap-V2" title="Link to this heading">ÔÉÅ</a></h2>
<section id="üìò-Notable-Classes">
<h3>üìò Notable Classes<a class="headerlink" href="#üìò-Notable-Classes" title="Link to this heading">ÔÉÅ</a></h3>
<hr class="docutils" />
<ul class="simple">
<li><p><strong>Class</strong>: üìò <code class="docutils literal notranslate"><span class="pre">web3scout.abi.ABILoad</span></code></p>
<ul>
<li><p><strong>Purpose</strong>: Load Web3Scout embedded Solidity JSON ABI</p></li>
<li><p><strong>Methods</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">apply(web3:</span> <span class="pre">Web3,</span> <span class="pre">address:</span> <span class="pre">Optional[str]</span> <span class="pre">=</span> <span class="pre">None)</span></code></p></li>
<li><p><strong>Parameters</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">web3</span></code>: Web3.py object (<code class="docutils literal notranslate"><span class="pre">Web3</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code>: List of addresses (optional)(<code class="docutils literal notranslate"><span class="pre">list</span></code>).</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Class</strong>: üìò <code class="docutils literal notranslate"><span class="pre">web3scout.utils.connect.ConnectW3</span></code></p>
<ul>
<li><p><strong>Purpose</strong>: Connect to a remote node using Web3.py</p></li>
<li><p><strong>Methods</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">apply()</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Class</strong>: üìò <code class="docutils literal notranslate"><span class="pre">web3scout.event.process.RetrieveEvents</span></code></p>
<ul>
<li><p><strong>Purpose</strong>: Retrieve pool events</p></li>
<li><p><strong>Methods</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">apply(event_type:</span> <span class="pre">str,</span> <span class="pre">address:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">start_block</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">end_block</span> <span class="pre">=</span> <span class="pre">None)</span></code></p></li>
<li><p><strong>Parameters</strong>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">event_type</span></code>: EventType (eg, SWAP, MINT, etc.) (<code class="docutils literal notranslate"><span class="pre">str</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code>: address (<code class="docutils literal notranslate"><span class="pre">str</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start_block</span></code>: start block number (<code class="docutils literal notranslate"><span class="pre">int</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">end_block</span></code>: end block number (<code class="docutils literal notranslate"><span class="pre">int</span></code>).</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">web3scout</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">PAIR_ADDRESS_UNIV2</span> <span class="o">=</span> <span class="s2">&quot;0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc&quot;</span>
<span class="n">PROVIDER_URL</span> <span class="o">=</span> <span class="s2">&quot;https://mainnet.infura.io/v3/xxxxxxxxxxxxx&quot;</span>
<span class="n">PLATFORM</span> <span class="o">=</span> <span class="n">Platform</span><span class="o">.</span><span class="n">AGNOSTIC</span>
<span class="n">ABI_NAME_UNIV2</span> <span class="o">=</span> <span class="n">JSONContract</span><span class="o">.</span><span class="n">UniswapV2Pair</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">abi</span> <span class="o">=</span> <span class="n">ABILoad</span><span class="p">(</span><span class="n">PLATFORM</span><span class="p">,</span> <span class="n">ABI_NAME_UNIV2</span><span class="p">)</span>
<span class="n">connect</span> <span class="o">=</span> <span class="n">ConnectW3</span><span class="p">(</span><span class="n">PROVIDER_URL</span><span class="p">)</span>
<span class="n">connect</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rEvents</span> <span class="o">=</span> <span class="n">RetrieveEvents</span><span class="p">(</span><span class="n">connect</span><span class="p">,</span> <span class="n">abi</span><span class="p">)</span>
<span class="n">last_block</span> <span class="o">=</span> <span class="n">rEvents</span><span class="o">.</span><span class="n">latest_block</span><span class="p">()</span>
<span class="n">start_block</span> <span class="o">=</span> <span class="n">last_block</span> <span class="o">-</span> <span class="mi">100000</span>
</pre></div>
</div>
</div>
</section>
<section id="Extract-Mint-Events">
<h3>Extract Mint Events<a class="headerlink" href="#Extract-Mint-Events" title="Link to this heading">ÔÉÅ</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">events</span> <span class="o">=</span> <span class="n">rEvents</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">EventType</span><span class="o">.</span><span class="n">MINT</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="n">PAIR_ADDRESS_UNIV2</span><span class="p">,</span> <span class="n">start_block</span><span class="o">=</span><span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="o">=</span><span class="n">last_block</span><span class="p">)</span>
<span class="n">rEvents</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">(</span><span class="n">events</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>blockNumber</th>
      <th>event</th>
      <th>address</th>
      <th>blockHash</th>
      <th>logIndex</th>
      <th>transactionHash</th>
      <th>transactionIndex</th>
      <th>args</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>23371798</td>
      <td>Mint</td>
      <td>0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc</td>
      <td>0xa1ea6a48f44d23bb2f12ce7abd3b4f5cc2805ae8d96b...</td>
      <td>368</td>
      <td>0xaff54c10394d9b196581b131819fe2fd70ee590e4ca2...</td>
      <td>144</td>
      <td>{'sender': '0x7a250d5630B4cF539739dF2C5dAcb4c6...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>23377169</td>
      <td>Mint</td>
      <td>0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc</td>
      <td>0xbe339a42ba9070d756d05bf9c90c7521c85917258766...</td>
      <td>344</td>
      <td>0xc16a56b8ac683b724f338d0073a289c7429879aafa5b...</td>
      <td>71</td>
      <td>{'sender': '0x7a250d5630B4cF539739dF2C5dAcb4c6...</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Extract-Swap-Events">
<h3>Extract Swap Events<a class="headerlink" href="#Extract-Swap-Events" title="Link to this heading">ÔÉÅ</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">connect</span> <span class="o">=</span> <span class="n">ConnectW3</span><span class="p">(</span><span class="n">PROVIDER_URL</span><span class="p">)</span>
<span class="n">connect</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rEvents</span> <span class="o">=</span> <span class="n">RetrieveEvents</span><span class="p">(</span><span class="n">connect</span><span class="p">,</span> <span class="n">abi</span><span class="p">)</span>
<span class="n">last_block</span> <span class="o">=</span> <span class="n">rEvents</span><span class="o">.</span><span class="n">latest_block</span><span class="p">()</span>
<span class="n">start_block</span> <span class="o">=</span> <span class="n">last_block</span> <span class="o">-</span> <span class="mi">200</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">events</span> <span class="o">=</span> <span class="n">rEvents</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">EventType</span><span class="o">.</span><span class="n">SWAP</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="n">PAIR_ADDRESS_UNIV2</span><span class="p">,</span> <span class="n">start_block</span><span class="o">=</span><span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="o">=</span><span class="n">last_block</span><span class="p">)</span>
<span class="n">rEvents</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">(</span><span class="n">events</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>blockNumber</th>
      <th>event</th>
      <th>address</th>
      <th>blockHash</th>
      <th>logIndex</th>
      <th>transactionHash</th>
      <th>transactionIndex</th>
      <th>args</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>23465207</td>
      <td>Swap</td>
      <td>0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc</td>
      <td>0xe19cb4648c2843e0e5e1b9b4b5a6a4077637d8c5f77f...</td>
      <td>70</td>
      <td>0x714d53f50f4f66361fb294b5ca72214448c740352eae...</td>
      <td>7</td>
      <td>{'sender': '0x7a250d5630B4cF539739dF2C5dAcb4c6...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>23465266</td>
      <td>Swap</td>
      <td>0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc</td>
      <td>0xdcddce03378ef0979a7324268bc434f17ab26496466f...</td>
      <td>596</td>
      <td>0xa7c3a5cbd3792cda4c8b75fe36b9e8f97aabbe169c10...</td>
      <td>155</td>
      <td>{'sender': '0x5141B82f5fFDa4c6fE1E372978F1C542...</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Extract-Burn-Events">
<h3>Extract Burn Events<a class="headerlink" href="#Extract-Burn-Events" title="Link to this heading">ÔÉÅ</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">connect</span> <span class="o">=</span> <span class="n">ConnectW3</span><span class="p">(</span><span class="n">PROVIDER_URL</span><span class="p">)</span>
<span class="n">connect</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rEvents</span> <span class="o">=</span> <span class="n">RetrieveEvents</span><span class="p">(</span><span class="n">connect</span><span class="p">,</span> <span class="n">abi</span><span class="p">)</span>
<span class="n">last_block</span> <span class="o">=</span> <span class="n">rEvents</span><span class="o">.</span><span class="n">latest_block</span><span class="p">()</span>
<span class="n">start_block</span> <span class="o">=</span> <span class="n">last_block</span> <span class="o">-</span> <span class="mi">20000</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">events</span> <span class="o">=</span> <span class="n">rEvents</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">EventType</span><span class="o">.</span><span class="n">BURN</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="n">PAIR_ADDRESS_UNIV2</span><span class="p">,</span> <span class="n">start_block</span><span class="o">=</span><span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="o">=</span><span class="n">last_block</span><span class="p">)</span>
<span class="n">rEvents</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">(</span><span class="n">events</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>blockNumber</th>
      <th>event</th>
      <th>address</th>
      <th>blockHash</th>
      <th>logIndex</th>
      <th>transactionHash</th>
      <th>transactionIndex</th>
      <th>args</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>23450422</td>
      <td>Burn</td>
      <td>0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc</td>
      <td>0x860708394ddb55a57a43dc29fd4130566c4ed44509a1...</td>
      <td>78</td>
      <td>0xb612ada9b0a38ff64588961e73fc1d950b023dcfc052...</td>
      <td>9</td>
      <td>{'sender': '0x0e00E9F2Ed00003b37dc611D41b10029...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>23455503</td>
      <td>Burn</td>
      <td>0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc</td>
      <td>0x7d8ccf83b41b7c61ad2bf3012e28e4bef4652ad2e4dc...</td>
      <td>133</td>
      <td>0xca16994b4be4be987abb5c20c8a4c760f19a2c5597b3...</td>
      <td>24</td>
      <td>{'sender': '0x7a250d5630B4cF539739dF2C5dAcb4c6...</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="Extract-Sync-Events-(Price-Oracle)">
<h3>Extract Sync Events (Price Oracle)<a class="headerlink" href="#Extract-Sync-Events-(Price-Oracle)" title="Link to this heading">ÔÉÅ</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pair_address</span> <span class="o">=</span> <span class="s2">&quot;0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc&quot;</span>
<span class="n">provider_url</span> <span class="o">=</span> <span class="s2">&quot;https://mainnet.infura.io/v3/xxxxxxxxxxxxx&quot;</span>
<span class="n">platform</span> <span class="o">=</span> <span class="n">Platform</span><span class="o">.</span><span class="n">AGNOSTIC</span>
<span class="n">abi_name</span> <span class="o">=</span> <span class="n">JSONContract</span><span class="o">.</span><span class="n">UniswapV2Pair</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">abi</span> <span class="o">=</span> <span class="n">ABILoad</span><span class="p">(</span><span class="n">PLATFORM</span><span class="p">,</span> <span class="n">ABI_NAME_UNIV2</span><span class="p">)</span>
<span class="n">connect</span> <span class="o">=</span> <span class="n">ConnectW3</span><span class="p">(</span><span class="n">PROVIDER_URL</span><span class="p">)</span>
<span class="n">connect</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">last_block</span> <span class="o">=</span> <span class="n">connect</span><span class="o">.</span><span class="n">get_w3</span><span class="p">()</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">block_number</span>
<span class="n">start_block</span> <span class="o">=</span> <span class="n">last_block</span> <span class="o">-</span> <span class="mi">100</span>

<span class="c1"># Grab batch sync events from pool</span>
<span class="n">rEvents</span> <span class="o">=</span> <span class="n">RetrieveEvents</span><span class="p">(</span><span class="n">connect</span><span class="p">,</span> <span class="n">abi</span><span class="p">)</span>
<span class="n">events</span> <span class="o">=</span> <span class="n">rEvents</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">EventType</span><span class="o">.</span><span class="n">SYNC</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="n">PAIR_ADDRESS_UNIV2</span><span class="p">,</span> <span class="n">start_block</span><span class="o">=</span><span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="o">=</span><span class="n">last_block</span><span class="p">)</span>
<span class="n">rEvents</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">(</span><span class="n">events</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>blockNumber</th>
      <th>event</th>
      <th>address</th>
      <th>blockHash</th>
      <th>logIndex</th>
      <th>transactionHash</th>
      <th>transactionIndex</th>
      <th>args</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>23465297</td>
      <td>Sync</td>
      <td>0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc</td>
      <td>0x9222687c4e46e75da9ffa9b0a6272cfbcb4bb89a6ceb...</td>
      <td>287</td>
      <td>0xf986f4b7cf60f36502b9f2d424db4398bfc736712d89...</td>
      <td>64</td>
      <td>{'reserve0': 14160247492323, 'reserve1': 34248...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>23465299</td>
      <td>Sync</td>
      <td>0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc</td>
      <td>0xa9347912eb674c318ce4ff89adf2187793336daef54a...</td>
      <td>919</td>
      <td>0x3d3c4a04fc440289004003c7e132f11b46bc842ccf39...</td>
      <td>253</td>
      <td>{'reserve0': 14160249143395, 'reserve1': 34248...</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
</section>
<section id="Uniswap-V3">
<h2>Uniswap V3<a class="headerlink" href="#Uniswap-V3" title="Link to this heading">ÔÉÅ</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">PAIR_ADDRESS_UNIV3</span> <span class="o">=</span> <span class="s2">&quot;0x8ad599c3a0ff1de082011efddc58f1908eb6e6d8&quot;</span>
<span class="n">ABI_NAME_UNIV3</span> <span class="o">=</span> <span class="n">JSONContract</span><span class="o">.</span><span class="n">UniswapV3Pool</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">abi</span> <span class="o">=</span> <span class="n">ABILoad</span><span class="p">(</span><span class="n">PLATFORM</span><span class="p">,</span> <span class="n">ABI_NAME_UNIV3</span><span class="p">)</span>
<span class="n">connect</span> <span class="o">=</span> <span class="n">ConnectW3</span><span class="p">(</span><span class="n">PROVIDER_URL</span><span class="p">)</span>
<span class="n">connect</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span>
</pre></div>
</div>
</div>
<section id="id1">
<h3>Extract Mint Events<a class="headerlink" href="#id1" title="Link to this heading">ÔÉÅ</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rEvents</span> <span class="o">=</span> <span class="n">RetrieveEvents</span><span class="p">(</span><span class="n">connect</span><span class="p">,</span> <span class="n">abi</span><span class="p">)</span>
<span class="n">last_block</span> <span class="o">=</span> <span class="n">rEvents</span><span class="o">.</span><span class="n">latest_block</span><span class="p">()</span>
<span class="n">start_block</span> <span class="o">=</span> <span class="n">last_block</span> <span class="o">-</span> <span class="mi">2000</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">events</span> <span class="o">=</span> <span class="n">rEvents</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">EventType</span><span class="o">.</span><span class="n">MINT</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="n">PAIR_ADDRESS_UNIV3</span><span class="p">,</span> <span class="n">start_block</span><span class="o">=</span><span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="o">=</span><span class="n">last_block</span><span class="p">)</span>
<span class="n">rEvents</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">(</span><span class="n">events</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>blockNumber</th>
      <th>event</th>
      <th>address</th>
      <th>blockHash</th>
      <th>logIndex</th>
      <th>transactionHash</th>
      <th>transactionIndex</th>
      <th>args</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>23463948</td>
      <td>Mint</td>
      <td>0x8ad599c3A0ff1De082011EFDDc58f1908eb6e6D8</td>
      <td>0xec927676fe28a0726104aa70cf3bd59b76ba66af40f1...</td>
      <td>505</td>
      <td>0x4cee13dee6e51e8004755939261797d6017bee978af9...</td>
      <td>195</td>
      <td>{'owner': '0xC36442b4a4522E871399CD717aBDD847A...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>23464797</td>
      <td>Mint</td>
      <td>0x8ad599c3A0ff1De082011EFDDc58f1908eb6e6D8</td>
      <td>0x7cc3e7aa51b6dfa77822a263c6a4d4b7b95701e811a0...</td>
      <td>92</td>
      <td>0x98a4930de3206c2542eea8a3f50cee357b460cf90c07...</td>
      <td>15</td>
      <td>{'owner': '0xC36442b4a4522E871399CD717aBDD847A...</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="id2">
<h3>Extract Swap Events<a class="headerlink" href="#id2" title="Link to this heading">ÔÉÅ</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rEvents</span> <span class="o">=</span> <span class="n">RetrieveEvents</span><span class="p">(</span><span class="n">connect</span><span class="p">,</span> <span class="n">abi</span><span class="p">)</span>
<span class="n">last_block</span> <span class="o">=</span> <span class="n">rEvents</span><span class="o">.</span><span class="n">latest_block</span><span class="p">()</span>
<span class="n">start_block</span> <span class="o">=</span> <span class="n">last_block</span> <span class="o">-</span> <span class="mi">100</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">events</span> <span class="o">=</span> <span class="n">rEvents</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">EventType</span><span class="o">.</span><span class="n">SWAP</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="n">PAIR_ADDRESS_UNIV3</span><span class="p">,</span> <span class="n">start_block</span><span class="o">=</span><span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="o">=</span><span class="n">last_block</span><span class="p">)</span>
<span class="n">rEvents</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">(</span><span class="n">events</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>blockNumber</th>
      <th>event</th>
      <th>address</th>
      <th>blockHash</th>
      <th>logIndex</th>
      <th>transactionHash</th>
      <th>transactionIndex</th>
      <th>args</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>23465350</td>
      <td>Swap</td>
      <td>0x8ad599c3A0ff1De082011EFDDc58f1908eb6e6D8</td>
      <td>0xc56723fa7ebeb75d7a8b205e778f6cedbf883436e493...</td>
      <td>192</td>
      <td>0x824cccb416cb05ff1f99d486061a73fe145dfa3b51ae...</td>
      <td>72</td>
      <td>{'sender': '0x06CFf7088619C7178F5e14f0B119458d...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>23465364</td>
      <td>Swap</td>
      <td>0x8ad599c3A0ff1De082011EFDDc58f1908eb6e6D8</td>
      <td>0x0cd490eb10b49b3bfd392642b507ea9e041ba37ff05d...</td>
      <td>346</td>
      <td>0x72208ff6cba8cc337becd07813aabc5ba9e67b18fa49...</td>
      <td>53</td>
      <td>{'sender': '0x68b3465833fb72A70ecDF485E0e4C7bD...</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="id3">
<h3>Extract Burn Events<a class="headerlink" href="#id3" title="Link to this heading">ÔÉÅ</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rEvents</span> <span class="o">=</span> <span class="n">RetrieveEvents</span><span class="p">(</span><span class="n">connect</span><span class="p">,</span> <span class="n">abi</span><span class="p">)</span>
<span class="n">last_block</span> <span class="o">=</span> <span class="n">rEvents</span><span class="o">.</span><span class="n">latest_block</span><span class="p">()</span>
<span class="n">start_block</span> <span class="o">=</span> <span class="n">last_block</span> <span class="o">-</span> <span class="mi">1000</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">events</span> <span class="o">=</span> <span class="n">rEvents</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">EventType</span><span class="o">.</span><span class="n">BURN</span><span class="p">,</span> <span class="n">address</span> <span class="o">=</span> <span class="n">PAIR_ADDRESS_UNIV3</span><span class="p">,</span> <span class="n">start_block</span><span class="o">=</span><span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="o">=</span><span class="n">last_block</span><span class="p">)</span>
<span class="n">rEvents</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">(</span><span class="n">events</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>blockNumber</th>
      <th>event</th>
      <th>address</th>
      <th>blockHash</th>
      <th>logIndex</th>
      <th>transactionHash</th>
      <th>transactionIndex</th>
      <th>args</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>23464722</td>
      <td>Burn</td>
      <td>0x8ad599c3A0ff1De082011EFDDc58f1908eb6e6D8</td>
      <td>0x4b1ff3fb22d29c37213207bb5bc41790beb022667a3c...</td>
      <td>103</td>
      <td>0x25e1c38c28d31049e4c186a8495bd32e1091edc76182...</td>
      <td>32</td>
      <td>{'owner': '0xC36442b4a4522E871399CD717aBDD847A...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>23464753</td>
      <td>Burn</td>
      <td>0x8ad599c3A0ff1De082011EFDDc58f1908eb6e6D8</td>
      <td>0xa3d9db942f44447cb9cdda442b3f3ddc094fa1e65695...</td>
      <td>87</td>
      <td>0x66c54efa2b7395a1332c4e8eceb4b9fd45ca3182ad72...</td>
      <td>29</td>
      <td>{'owner': '0xC36442b4a4522E871399CD717aBDD847A...</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="impermanent_loss.html" class="btn btn-neutral float-left" title="Impermanent Loss Agent" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="testnet_sim_univ2.html" class="btn btn-neutral float-right" title="Solidity Script Interfacing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Read the Docs core team.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>